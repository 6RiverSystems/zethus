(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,a){e.exports=a(257)},256:function(e,t,a){},257:function(e,t,a){"use strict";a.r(t);var n=a(19),i=a.n(n),o=a(0),r=a.n(o),s=a(13),c=a(7),l=a(3),u=a(4),d=a(6),p=a(2),h=a(9),b=a(5),m=a(8),v=a.n(m),f=a(99),g=a.n(f),O=a(47),y=a.n(O),j=a(65),k=a.n(j),w=a(100),E=a.n(w),z=a(14),x=a(12),C=a(20),S=a.n(C),T=function(){function e(t,a,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Object(l.a)(this,e);var o=i.onHeaderChange;this.options=i,this.ros=t,this.headerFrameId="",this.changeTopic(a,n,!1),this.onHeaderChange=o||function(){},this.update=this.update.bind(this)}return Object(u.a)(e,[{key:"hide",value:function(){this.object.visible=!1}},{key:"show",value:function(){this.object.visible=!0}},{key:"destroy",value:function(){this.unsubscribe(),this.object&&this.object.parent&&(this.object.parent.remove(this.object),this.object=null)}},{key:"reset",value:function(){}},{key:"subscribe",value:function(){var e=this;this.topicInstances&&this.topicInstances.forEach(function(t){t.subscribe(e.update)})}},{key:"unsubscribe",value:function(){this.topicInstances&&this.topicInstances.forEach(function(e){e.unsubscribe()})}},{key:"update",value:function(e){var t=e.header?e.header.frame_id:"";t!==this.headerFrameId&&(this.headerFrameId=t,this.onHeaderChange(this.headerFrameId))}},{key:"updateOptions",value:function(e){this.options=Object(c.a)({},this.options,e)}},{key:"changeTopic",value:function(e,t){var a=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.options,o=i.compression,r=i.queueSize,s=i.throttleRate;n&&this.unsubscribe(),this.topicName=e,this.messageType=t||this.messageType,this.topicInstances=(Array.isArray(e)?e:[{name:e,messageType:t}]).map(function(e){var t=e.name,n=e.messageType;return new S.a.Topic({ros:a.ros,name:t,messageType:n,compression:o||"none",throttle_rate:s||0,queue_size:r||10})}),n&&(this.reset(),this.subscribe())}}]),e}(),P=T,V=a(1),N="Arrow",R="Axes",M="FlatArrow",A="geometry_msgs/PointStamped",L="geometry_msgs/PolygonStamped",I="geometry_msgs/PoseArray",_="geometry_msgs/PoseStamped",F="moveit_msgs/CollisionObject",D="moveit_msgs/DisplayTrajectory",U="moveit_msgs/PlanningScene",B="nav_msgs/OccupancyGrid",Y="nav_msgs/Odometry",W="nav_msgs/Path",H="sensor_msgs/Image",X="sensor_msgs/LaserScan",q="sensor_msgs/PointCloud2",G="visualization_msgs/Marker",Z="visualization_msgs/MarkerArray",Q=1,K=2,J=3,$=4,ee=5,te=6,ae=7,ne=8,ie=0,oe=1,re=2,se=1,ce=0,le=1,ue=2,de=3,pe=4,he=5,be=6,me=7,ve=8,fe=11,ge={MAP:"map",CONST_MAP:"constmap",RAW:"raw"},Oe={SQUARES:"squares",POINTS:"points",FLAT_SQUARES:"flat_squares",SPHERES:"spheres",BOXES:"boxes"},ye={INTENSITY:"Intensity",AXIS_COLOR:"AxisColor",FLAT_COLOR:"FlatColor"},je={RGB:"rgb",INTENSITY:"intensity"},ke={X:"x",Y:"y",Z:"z"},we=Object(c.a)({INTENSITY:"intensity"},ke),Ee=N,ze=R,xe=N,Ce=R,Se=M,Te=1,Pe=1,Ve=32,Ne=1,Re=1,Me="#ff0000",Ae="#008000",Le="#0000ff",Ie="#f0ff00",_e={backgroundColor:"#000000",gridSize:30,gridDivisions:30,gridColor:"#222222",gridCenterlineColor:"#333333"},Fe={selectedFrame:""},De={shaftLength:1,shaftRadius:.05,headLength:.3,headRadius:.1},Ue={axesLength:1,axesRadius:.1},Be={arrowLength:.3},Ye={robot:new V.B},We={channelName:we.INTENSITY,useRainbow:!1,invertRainbow:!1,minColor:"#000000",maxColor:"#ffffff",autocomputeIntensityBounds:!1,maxIntensity:3730,minIntensity:388},He={},Xe={axis:ke.X,autocomputeValueBounds:!1,useFixedFrame:!1,minAxisValue:0,maxAxisValue:0},qe={queueSize:1,defaultWidth:320,defaultHeight:240,compression:"cbor"},Ge=Object(c.a)({selectable:!1,style:Oe.FLAT_SQUARES,size:.05,alpha:1,decayTime:0,queueSize:10,compression:"cbor",colorTransformer:ye.INTENSITY,flatColor:"#ffffff"},We,Xe),Ze={alpha:1,colorScheme:ge.MAP,compression:"cbor",drawBehind:!1},Qe={queueSize:1,namespaces:[]},Ke={queueSize:1,namespaces:[],throttleRate:0},Je=Object(c.a)({type:N,color:Me,alpha:1},De,Ue,Be,{positionTolerance:.1,angleTolerance:.1,keep:100}),$e={color:"#ffffff",alpha:1},et={},tt={compression:"cbor",colorChannel:je.RGB,size:.0125,useRainbow:!1},at={color:"#ff0000",alpha:1,radius:.2},nt={color:"#ffffff",alpha:1},it=Object(c.a)({color:Me,alpha:1},De,Ue,{type:xe}),ot=Object(c.a)({color:Me,alpha:1},De,Ue,Be,{type:Se}),rt={},st={},ct=function(e,t){var a=t.translation,n=a.x,i=a.y,o=a.z,r=t.rotation,s=r.w,c=r.x,l=r.y,u=r.z;e.position.set(n,i,o),e.quaternion.copy(new V.W(c,l,u,s).normalize())},lt=function(e,t){var a=t.x,n=t.y,i=t.z;e.scale.set(a,n,i)},ut=function(e,t){"string"===typeof t?e.material.color=new V.k(t):e.material.color.setRGB(t.r,t.g,t.b)},dt=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"setTransform",value:function(e){ct(this,e)}},{key:"setScale",value:function(e){lt(this,e)}},{key:"setColor",value:function(e){this.children.forEach(function(t){ut(t,e)})}}]),t}(V.B),pt=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"setTransform",value:function(e){ct(this,e)}},{key:"setScale",value:function(e){lt(this,e)}},{key:"setColor",value:function(e){ut(this,e)}},{key:"setAlpha",value:function(e){this.material.opacity=V.G.clamp(e,0,1)}}]),t}(V.J),ht=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).geometry=new V.f,e.material=new V.N,e}return Object(b.a)(t,e),t}(pt),bt=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,F,Object(c.a)({},He,i)))).object=new dt,n.updateOptions(Object(c.a)({},F,i)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"update",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"update",this).call(this,e);var a=e.id,n=e.operation,i=e.primitive_poses,o=e.primitives,r=this.object.getObjectByName(a);switch(n){case ie:r&&r.parent.remove(r);var s=new dt;s.name=a,o.forEach(function(e,a){var n=t.getNewPrimitive(e);n.setTransform({translation:i[a].position,rotation:i[a].orientation}),s.add(n)}),this.object.add(s);break;case oe:r&&r.parent.remove(r);break;case re:o.forEach(function(e){var a=t.getNewPrimitive(e);a.setTransform({translation:e.position,rotation:e.orientation}),r.add(a)})}}}],[{key:"getNewPrimitive",value:function(e){var t=e.type,a=e.dimensions;switch(t){case se:var n=new ht,i=Object(z.a)(a,3),o=i[0],r=i[1],s=i[2];return n.setScale({x:o,y:r,z:s}),n;default:return null}}}]),t}(P),mt=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ye;Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,D,i))).object=new dt,n.updateOptions(Object(c.a)({},D,i));var o=n.options.robot.clone();return Object.keys(o.links).forEach(function(e){o.links[e].traverse(function(e){e.material&&(e.material=new V.M({color:"#ff0000"}))})}),n.robotCopy=o,n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"update",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"update",this).call(this,e);var a=Object(z.a)(e.trajectory,1)[0].joint_trajectory,n=a.joint_names,i=a.points,o=e.trajectory_start.joint_state,r=o.name,s=o.position,c=this.robotCopy.clone(!0);if(this.object.add(c),r.forEach(function(e,t){var a=c.getObjectByName(e);a&&a.setAngle(s[t])}),i.forEach(function(e){var t=e.positions,a=e.time_from_start,i=a.nsecs,o=a.secs;setTimeout(function(){n.forEach(function(e,a){var n=c.getObjectByName(e);n&&n.setAngle(t[a])})},1e3*o+i/1e6)}),i.length>0){var l=i[i.length-1].time_from_start,u=l.nsecs,d=l.secs;setTimeout(function(){c.parent.remove(c)},1e3*d+u/1e6)}}}]),t}(P),vt=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:et;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,U,Object(c.a)({},et,i)))).object=new dt,n.collisionObjectViz=new bt,n.attachedCollisionObjects=new Map,n.object.add(n.collisionObjectViz.object),n.updateOptions(Object(c.a)({},U,i)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"update",value:function(e){var a=this;Object(x.a)(Object(p.a)(t.prototype),"update",this).call(this,e);var n=e.robot_state,i=n.attached_collision_objects,o=void 0===i?[]:i,r=n.is_diff,s=n.joint_state,c=s.name,l=s.position;if(e.world.collision_objects.forEach(function(e){a.collisionObjectViz.update(e)}),o.length&&o.map(function(e){var t=e.link_name,n=e.object,i=new bt;i.object=a.object.getObjectByName(t),i.update(n),a.attachedCollisionObjects.set(n.id,i)}),!r){var u=o.map(function(e){return e.object.id}),d=!0,h=!1,b=void 0;try{for(var m,v=this.attachedCollisionObjects.entries()[Symbol.iterator]();!(d=(m=v.next()).done);d=!0){var f=m.value,g=Object(z.a)(f,2),O=g[0],y=g[1];-1===u.indexOf(O)&&(y.update({id:O,operation:oe}),this.attachedCollisionObjects.delete(O))}}catch(j){h=!0,b=j}finally{try{d||null==v.return||v.return()}finally{if(h)throw b}}}c.forEach(function(e,t){var n=a.object.getObjectByName(e);n&&n.setAngle([l[t]])})}}]),t}(P),ft=function(e){function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Te;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).geometry=new V.n(n,n,i,Ve),e.material=new V.N({color:a}),e.material.transparent=!0,e.rotateX(Math.PI/2),e}return Object(b.a)(t,e),t}(pt),gt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this))).geometry=new V.l(Re,Ne,Ve),a.material=new V.N({color:e}),a.material.transparent=!0,a}return Object(b.a)(t,e),t}(pt),Ot=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).cone=new gt(Me),e.cone.rotateZ(-Math.PI/2),e.cylinder=new ft(Me),e.cylinder.rotateZ(-Math.PI/2),e.cone.setScale({x:Re,y:Ne,z:Re}),e.cylinder.setScale({x:Pe,y:Te,z:Pe}),e.cylinder.translateY(e.cylinder.scale.y/2),e.cone.translateY(e.cylinder.scale.y+e.cone.scale.y/2),e.type=N,e.add(e.cone),e.add(e.cylinder),e}return Object(b.a)(t,e),Object(u.a)(t,[{key:"setColor",value:function(e){var t=e.cone,a=e.cylinder;t&&this.cone.setColor(t),a&&this.cylinder.setColor(a)}},{key:"setHeadDimensions",value:function(e){var t=e.radius,a=e.length,n=parseFloat(t),i=parseFloat(a);if(n){var o=this.cone.scale.y;this.cone.setScale({x:t,y:o,z:t})}if(i){var r=this.cone.scale,s=r.x,c=r.z;this.cone.setScale({x:s,y:i,z:c}),this.cone.position.set(0,0,0),this.cone.translateY(this.cylinder.scale.y+i/2)}}},{key:"setShaftDimensions",value:function(e){var t=e.radius,a=e.length,n=parseFloat(t),i=parseFloat(a);if(t){var o=this.cylinder.scale.y;this.cylinder.setScale({x:n,y:o,z:n})}if(a){var r=this.cylinder.scale,s=r.x,c=r.z;this.cylinder.setScale({x:s,y:i,z:c}),this.cylinder.position.set(0,0,0),this.cylinder.translateY(i/2),this.setHeadDimensions({length:this.cone.scale.y})}}},{key:"setAlpha",value:function(e){this.cylinder.setAlpha(e),this.cone.setAlpha(e)}},{key:"setScale",value:function(e){var t=e.x;lt(this,{x:t,y:t/2,z:t/2})}}]),t}(dt),yt=function(e){function t(e,a){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this))).x=new ft(Me,e,a),n.y=new ft(Ae,e,a),n.z=new ft(Le,e,a),n.x.translateX((a||Te)/2),n.y.translateZ(-(a||Te)/2),n.z.translateY((a||Te)/2),n.x.rotateZ(-Math.PI/2),n.y.rotateX(Math.PI/2),n.type=R,n.add(n.x),n.add(n.y),n.add(n.z),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"setLength",value:function(e){e=parseFloat(e),[this.x,this.y,this.z].forEach(function(t){t.position.set(0,0,0),t.scale.setY(e)}),this.x.translateY(e/2),this.y.translateY(-e/2),this.z.translateY(e/2)}},{key:"setRadius",value:function(e){this.children.forEach(function(t){t.scale.setX(parseFloat(e)),t.scale.setZ(parseFloat(e))})}}]),t}(dt),jt=function(e){function t(e,a){var n;Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this))).geometry=new V.z,n.geometry.vertices.push(new V.lb(0,0,0));var i={};return a||(i.vertexColors=V.nb),n.material=new V.D(Object(c.a)({},i)),n.material.transparent=!0,n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"setColor",value:function(e){ut(this,e)}},{key:"updatePoints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.geometry.vertices=e.map(function(e){var t=e.x,a=e.y,n=e.z;return new V.lb(t,a,n)}),this.geometry.verticesNeedUpdate=!0;var a=[];t.forEach(function(e){var t=e.r,n=e.g,i=e.b;a.push(new V.k(t,n,i))}),this.geometry.colors=a,this.geometry.colorsNeedUpdate=!0}},{key:"setTransform",value:function(e){ct(this,e)}},{key:"setAlpha",value:function(e){this.material.opacity=e}}]),t}(V.C),kt=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).type=M,e.arrowTop=new jt(16711680,!0),e.topPoints=[],e.topPoints.push(new V.lb(2,1,0)),e.topPoints.push(new V.lb(3,0,0)),e.topPoints.push(new V.lb(2,-1,0)),e.arrowTop.updatePoints(e.topPoints),e.add(e.arrowTop),e.arrowLength=new jt(16711680,!0),e.arrowLength.updatePoints([new V.lb(0,0,0),new V.lb(3,0,0)]),e.add(e.arrowLength),e.scale.set(.1,.1,.1),e}return Object(b.a)(t,e),Object(u.a)(t,[{key:"setLength",value:function(e){this.scale.set(e,e,e)}},{key:"setColor",value:function(e){var t=e.b,a=e.g,n=e.r;this.arrowTop.material.color.setRGB(n,a,t),this.arrowLength.material.color.setRGB(n,a,t)}}]),t}(dt),wt=function(e,t){switch(t.type){case N:var a=t.alpha,n=t.color,i=t.headLength,o=t.headRadius,r=t.shaftLength,s=t.shaftRadius;e.setHeadDimensions({radius:o,length:i}),e.setShaftDimensions({radius:s,length:r}),e.setAlpha(a),e.setColor({cone:new V.k(n),cylinder:new V.k(n)});break;case R:var c=t.axesLength,l=t.axesRadius;e.setLength(c),e.setRadius(l);break;case M:var u=t.arrowLength,d=t.color;e.setLength(u),e.setColor(new V.k(d))}},Et=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:it;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,_,Object(c.a)({},it,i)))).object=new V.B,n.primitive=null,n.updateOptions(Object(c.a)({},it,i)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updateOptions",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"updateOptions",this).call(this,e);var a=this.options.type;this.primitive&&this.primitive.type!==a&&(this.object.remove(this.primitive),this.primitive=null),this.primitive||(this.primitive=t.getNewPrimitive(this.options),this.object.add(this.primitive)),wt(this.primitive,this.options)}},{key:"update",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"update",this).call(this,e);var a=e.pose,n=a.orientation,i=a.position;this.primitive.setTransform({translation:i,rotation:n})}}],[{key:"getNewPrimitive",value:function(e){var t=null;switch(e.type){case xe:t=new Ot;break;case Ce:t=new yt;break;case Se:default:t=new kt}return t}}]),t}(P),zt=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nt;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,L,Object(c.a)({},nt,i)))).object=new dt,n.line=new jt(null,!0),n.updateOptions(Object(c.a)({},nt,i)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updateOptions",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"updateOptions",this).call(this,e);var a=this.options,n=a.alpha,i=a.color;this.line.setColor(new V.k(i)),this.line.setAlpha(n)}},{key:"update",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"update",this).call(this,e);var a=e.polygon.points;a.push(a[0]),this.line.updatePoints(a),this.object.add(this.line)}}]),t}(P),xt=function(e){function t(e){var a;return Object(l.a)(this,t),a=Object(d.a)(this,Object(p.a)(t).call(this)),(new V.x).load("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/fonts/helvetiker_regular.typeface.json",function(t){a.geometry=new V.hb(e,{font:t,size:.05,height:.005,curveSegments:12,bevelEnabled:!1,bevelThickness:10,bevelSize:8,bevelSegments:5}),a.material=new V.K({color:14540253})}),a.rotateX(Math.PI/2),a.rotateY(Math.PI),a}return Object(b.a)(t,e),t}(pt),Ct=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this))).add(new yt(.015,.25));var n=new xt(e);return n.rotateY(Math.PI).translateX(.03).translateY(.03),a.add(n),a.arrow=new Ot,a.arrow.setHeadDimensions({length:.3*Ne/2,radius:.1*Re/2}),a.arrow.setShaftDimensions({length:.85*Te,radius:.05*Pe/6}),a.arrow.setColor({cone:new V.k("#FF1493"),cylinder:new V.k(Ie)}),a.add(a.arrow),a.name=t.getName(e),a}return Object(b.a)(t,e),Object(u.a)(t,null,[{key:"getName",value:function(e){return"tf-".concat(e)}}]),t}(dt),St=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:st;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,null,Object(c.a)({},st,i)))).object=new V.B,n.object.name="test",n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"update",value:function(e){var t=this;e.transforms.forEach(function(e){var a=e.header.frame_id,n=e.child_frame_id,i=e.transform,o=[t.getFrameOrCreate(n),t.getFrameOrCreate(a)],r=o[0],s=o[1];if(s.add(r),r.setTransform(i),r.position.length()<.1)r.arrow.visible=!1;else{r.arrow.lookAt(s.getWorldPosition(new V.lb)),r.arrow.rotateY(-Math.PI/2),r.arrow.visible=!0;var c=r.arrow.cone.scale.y;r.arrow.setShaftDimensions({length:r.position.length()-c})}}),this.object.children.forEach(function(e){e.arrow.visible=!1})}},{key:"getFrameOrCreate",value:function(e){var t=this.object.getObjectByName(Ct.getName(e));if(t)return t;var a=new Ct(e);return this.object.add(a),a}}]),t}(P),Tt=a(110),Pt=["PerspectiveCamera","OrthographicCamera","AmbientLight","DirectionalLight","HemisphereLight","Light","RectAreaLight","SpotLight","PointLight"],Vt=function(e){for(var t=[e];Object.keys(t).length>0;){t.shift().children.forEach(function(e){if(e)if(Pt.indexOf(e.type)>-1){var a=e.parent;a.children=a.children.filter(function(t){return t!==e})}else t.push(e)})}},Nt=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rt;Object(l.a)(this,t),n=Object(d.a)(this,Object(p.a)(t).call(this,V.o));var o=i.packages;return n.param=new S.a.Param({ros:e,name:a}),n.object=new dt,n.packages=o||{},n.updateOptions(Object(c.a)({},rt,i)),n.defaultLoadMeshCallback=n.defaultLoadMeshCallback.bind(Object(h.a)(n)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updateOptions",value:function(){}},{key:"load",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.onComplete,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.param.get(function(t){e.loadRobot(t,a,n)})}},{key:"loadRobot",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.onComplete,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object(x.a)(Object(p.a)(t.prototype),"parse",this).call(this,e,Object(c.a)({packages:this.packages,loadMeshCb:n.loadMeshCb||this.defaultLoadMeshCallback,fetchOptions:{mode:"cors",credentials:"same-origin"}},n));this.object.add(i),this.object.name=i.robotName,a(this.object)}},{key:"defaultLoadMeshCallback",value:function(e,a,n){Object(x.a)(Object(p.a)(t.prototype),"defaultMeshLoader",this).call(this,e,a,function(e){Vt(e),n(e)})}},{key:"getPackages",value:function(e){this.param.get(function(t){var a=(new DOMParser).parseFromString(t,"text/xml"),n=Object(s.a)(a.querySelectorAll("mesh")).map(function(e){var t=e.getAttribute("filename").replace(/^package:\/\//,"").split(/\/(.+)/);return Object(z.a)(t,1)[0]});e(Object(s.a)(new Set(n)))})}},{key:"destroy",value:function(){this.object.parent&&this.object.parent.remove(this.object)}},{key:"hide",value:function(){this.object.visible=!1}},{key:"show",value:function(){this.object.visible=!0}}],[{key:"onComplete",value:function(e){Vt(e)}}]),t}(Tt.a),Rt=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).geometry=new V.eb(1,Ve,Ve),e.material=new V.N,e.material.transparent=!0,e}return Object(b.a)(t,e),t}(pt),Mt=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:at;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,A,i))).object=new dt,n.sphere=new Rt,n.object.add(n.sphere),n.updateOptions(Object(c.a)({},at,i)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updateOptions",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"updateOptions",this).call(this,e);var a=this.options,n=a.alpha,i=a.color,o=a.radius;this.sphere.setColor(i),this.sphere.setAlpha(n),this.sphere.setScale({x:o,y:o,z:o})}},{key:"update",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"update",this).call(this,e);var a=e.point,n=a.x,i=a.y,o=a.z;this.object.position.set(n,i,o)}}]),t}(P),At=function(e,t,a){void 0===e.attributes[t]?e.addAttribute(t,new V.g(new Float32Array(a,0,15e5),3).setDynamic(!0)):e.attributes[t].array=a,e.attributes[t].needsUpdate=!0},Lt=function(e,t){if(!e)return{positions:new Float32Array(0),colors:new Float32Array(0),normals:new Float32Array(0)};var a=t.colorChannel,n=t.useRainbow,i=e.height*e.width,o=new Float32Array(3*i),r=new Float32Array(3*i),s=new Float32Array(3*i),c=Uint8Array.from(e.data).buffer,l=new DataView(c),u={},d={};e.fields.forEach(function(t){u[t.name]=t.offset,d[t.name]=function(e,t){switch(t){case Q:return e.getInt8;case K:return e.getUint8;case J:return e.getInt16;case $:return e.getUint16;case ee:return e.getInt32;case te:return e.getUint32;case ne:return e.getFloat64;case ae:default:return e.getFloat32}}(l,e.datatype)});for(var p=0;p<i;p++){var h=p*e.point_step;if(void 0!==u.x&&void 0!==u.y&&void 0!==u.z&&(o[3*p]=d.x.call(l,h+u.x,!e.big_endian),o[3*p+1]=d.y.call(l,h+u.y,!e.big_endian),o[3*p+2]=d.z.call(l,h+u.z,!e.big_endian)),void 0!==u.rgb&&a===je.RGB&&(r[3*p]=l.getUint8(h+u.rgb+2)/255,r[3*p+1]=l.getUint8(h+u.rgb+1)/255,r[3*p+2]=l.getUint8(h+u.rgb)/255),void 0!==u.intensity&&a===je.INTENSITY){var b=d.intensity.call(l,h+u.intensity,!e.big_endian);r[3*p]=n?0:Math.min(b/255,255),r[3*p+1]=Math.min(b/255,255),r[3*p+2]=n?0:Math.min(b/255,255)}void 0!==u.normal_x&&void 0!==u.normal_y&&void 0!==u.normal_z&&(s[3*p]=d.normal_x.call(l,h+u.normal_x,!e.big_endian),s[3*p+1]=d.normal_y.call(l,h+u.normal_y,!e.big_endian),s[3*p+2]=d.normal_z.call(l,h+u.normal_z,!e.big_endian))}return{positions:o,colors:r,normals:s}},It=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tt;Object(l.a)(this,t),n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,q,Object(c.a)({},tt,i)));var o=new V.V({size:n.options.size,vertexColors:V.nb}),r=new V.h;return r.setDrawRange(0,0),r.computeBoundingSphere(),n.object=new V.U(r,o),n.object.frustumCulled=!1,n.updateOptions(Object(c.a)({},tt,i)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updatePointCloudGeometry",value:function(e,t,a){var n=this.object,i=n.geometry,o=n.material;o.size===this.options.size||Number.isNaN(this.options.size)||(o.size=this.options.size,o.needsUpdate=!0);var r=Math.min(5e5,e.length);i.setDrawRange(0,r),At(i,"position",e),At(i,"color",t),At(i,"normal",a)}},{key:"update",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"update",this).call(this,e);var a=Lt(e,this.options),n=a.colors,i=a.normals,o=a.positions;this.updatePointCloudGeometry(o,n,i)}}]),t}(P),_t=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).geometry=new V.f,e.material=new V.N,e}return Object(b.a)(t,e),Object(u.a)(t,[{key:"setScale",value:function(e){var a=e.x;Object(x.a)(Object(p.a)(t.prototype),"setScale",this).call(this,{x:a,y:a,z:a})}}]),t}(pt),Ft=function(e){function t(e){var a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this))).geometry=new V.z,a.material=new V.D({linewidth:n}),a.material.vertexColors=V.nb,a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"setColor",value:function(e){ut(this,e)}},{key:"updatePoints",value:function(e,t){this.geometry.vertices=e.map(function(e){var t=e.x,a=e.y,n=e.z;return new V.lb(t,a,n)}),this.geometry.verticesNeedUpdate=!0,t.length>0&&(this.geometry.colors=t.map(function(e){var t=e.r,a=e.g,n=e.b;return new V.k(t,a,n)}),this.geometry.colorsNeedUpdate=!0)}},{key:"setTransform",value:function(e){ct(this,e)}}]),t}(V.E),Dt=function(){function e(t,a){Object(l.a)(this,e),this.objectPool=t,this.Primitive=a}return Object(u.a)(e,[{key:"setObjectDimension",value:function(e,t,a,n){var i=t.x,o=t.y,r=t.z;e.setColor(a),e.setScale(n),e.position.set(i,o,r)}},{key:"reusePool",value:function(e,t,a){for(var n=a.scale,i=e.length,o=0;o<i;o++){var r=this.objectPool.children[o];this.setObjectDimension(r,e[o],t[o],n)}for(var s=i;s<this.objectPool.children.length;s++)this.objectPool.children[s].visible=!1}},{key:"increasePool",value:function(e,t,a){for(var n=this.objectPool.children.length,i=a.scale,o=0;o<n;o++){var r=this.objectPool.children[o];this.setObjectDimension(r,e[o],t[o],i)}for(var s=n;s<e.length;s++){var c=new this.Primitive,l=e[s],u=l.x,d=l.y,p=l.z;c.setColor(t[s]),c.setScale(i),c.position.set(u,d,p),this.objectPool.add(c)}}}]),e}(),Ut=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).geometry=new V.z,e.material=new V.K,e.objectCacher=new Dt(Object(h.a)(e),Rt),e}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updatePoints",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.subtype=ue,e.length<this.children.length?this.objectCacher.reusePool(e,t,a):this.objectCacher.increasePool(e,t,a)}}]),t}(pt),Bt=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).geometry=new V.z,e.material=new V.V({vertexColors:V.nb}),e}return Object(b.a)(t,e),Object(u.a)(t,[{key:"setTransform",value:function(e){ct(this,e)}},{key:"updatePoints",value:function(e,t){var a=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).scale.x;this.material.size=a,this.geometry.vertices=e.map(function(e){return new V.lb(e.x,e.y,e.z)}),this.geometry.verticesNeedUpdate=!0,t.length>0&&(this.geometry.colors=t.map(function(e){return new V.k(e.r,e.g,e.b)}),this.geometry.colorsNeedUpdate=!0)}},{key:"setScale",value:function(e){var t=e.x;this.material.size=t}}]),t}(V.U),Yt=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).geometry=new V.z,e.material=new V.K({vertexColors:V.u}),e.material.side=V.q,e}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updatePoints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,n=[],i=[],o=a.scale,r=o.x,s=o.y,c=o.z;this.scale.set(r,s,c);for(var l=0,u=e.length/3;l<u;l++){[e[3*l],e[3*l+1],e[3*l+2]].map(function(e){n.push(new V.lb(e.x,e.y,e.z))});var d=0===t.length?{r:1,g:0,b:0}:t[3*l];i.push(new V.t(3*l,3*l+2,3*l+1,new V.lb,new V.k(d.r,d.g,d.b)))}this.geometry.vertices=n,this.geometry.faces=i,this.geometry.computeFaceNormals(),this.geometry.computeVertexNormals(),this.geometry.elementsNeedUpdate=!0,this.geometry.verticesNeedUpdate=!0}}]),t}(pt),Wt=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).geometry=new V.z,e.material=new V.K,e.objectCacher=new Dt(Object(h.a)(e),_t),e}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updatePoints",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.subtype=le,e.length<this.children.length?this.objectCacher.reusePool(e,t,a):this.objectCacher.increasePool(e,t,a)}}]),t}(pt),Ht=function(e){switch(e.type){case le:return new _t;case ue:return new Rt;case de:var t=new dt;return t.add(new ft),t;case he:return new Ft;case pe:return new jt;case me:return new Ut;case ve:return new Bt;case fe:return new Yt;case be:return new Wt;case ce:default:var a=new Ot;return a.setHeadDimensions({radius:.1*Re,length:.3*Ne}),a.setShaftDimensions({radius:.05*Pe,length:.7*Te}),a}},Xt=function(){function e(t,a){Object(l.a)(this,e),this.objectMap={},this.object=t,this.namespaces={},this.onChangeCb=a}return Object(u.a)(e,[{key:"getMarkerOrCreate",value:function(t){var a=e.getId(t);if(!this.objectMap[a]){var n=Ht(t);this.objectMap[a]=n,this.object.add(n)}return this.objectMap[a].visible=this.namespaces[t.ns],this.objectMap[a]}},{key:"extractNameSpace",value:function(e){return e.split("-")[0]}},{key:"setQueueSize",value:function(e,t){t.unsubscribe(),t.queueSize=e,t.topic=new S.a.Topic({ros:t.ros,name:t.topicName,messageType:t.messageType,queue_size:e}),t.subscribe()}},{key:"updateOptions",value:function(e,t){var a=e.namespaces,n=e.queueSize,i=t.queueSize;for(var o in i!==n&&this.setQueueSize(n,t),this.namespaces=a,this.objectMap)if(this.objectMap.hasOwnProperty(o)){var r=this.extractNameSpace(o);this.objectMap[o].visible=this.namespaces[r]}}},{key:"onChange",value:function(){this.onChangeCb()}},{key:"updateMarker",value:function(e){var t=e.color,a=e.colors,n=e.points,i=e.pose,o=i.orientation,r=i.position,s=e.scale,c=this.getMarkerOrCreate(e);c.updatePoints&&c.updatePoints(n,a,e),c.setTransform({translation:r,rotation:o}),c.setScale&&!c.updatePoints&&c.setScale({x:s.x,y:s.y,z:s.z}),c.setColor&&a.length<=0&&c.setColor(t);var l=e.ns;l in this.namespaces||(this.namespaces[l]=!0,this.onChange())}},{key:"removeObject",value:function(e){var t=this.objectMap[e];t.parent.remove(t),delete this.objectMap[e]}},{key:"reset",value:function(){var e=this;this.namespaces={},this.onChange(),Object.keys(this.objectMap).forEach(function(t){e.removeObject(t)})}}],[{key:"getId",value:function(e){var t=e.ns,a=e.id;return"".concat(t,"-").concat(a)}}]),e}(),qt=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ke;Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,Z,Object(c.a)({},Ke,i)))).object=new dt,n.onChange=n.onChange.bind(Object(h.a)(n));var o=i.queueSize;return n.markerManager=new Xt(n.object,n.onChange),n.queueSize=o,n.updateOptions(Object(c.a)({},Ke,i)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updateOptions",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"updateOptions",this).call(this,e),this.markerManager.updateOptions(this.options,this)}},{key:"onChange",value:function(){this.callback&&this.callback()}},{key:"onNamespaceChange",value:function(e){this.callback=e}},{key:"update",value:function(e){var a=this;Object(x.a)(Object(p.a)(t.prototype),"update",this).call(this,e),e.markers.length>0&&e.markers.forEach(function(e){a.markerManager.updateMarker(e)})}},{key:"reset",value:function(){this.markerManager.reset()}}]),t}(P),Gt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.a)(this,e),this.max_pts=t.max_pts||1e4,this.rootObject=t.rootObject||new V.P}return Object(u.a)(e,[{key:"setup",value:function(e,t,a){var n=this;this.rootObject.children.forEach(function(e){n.rootObject.remove(e)}),this.positions=new V.g(new Float32Array(3*this.max_pts),3,!1),this.colors=new V.g(new Float32Array(3*this.max_pts),3,!1);var i={};e===Oe.POINTS&&(i={map:(new V.jb).load("https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/sprites/circle.png"),alphaTest:.5});this.geomtry=new V.h,this.geomtry.addAttribute("position",this.positions.setDynamic(!0)),this.geomtry.addAttribute("color",this.colors.setDynamic(!0)),this.material=new V.V(Object(c.a)({color:8947848,size:t},i)),this.material.vertexColors=V.nb,this.material.transparent=!0,this.material.opacity=a,this.object=new V.U(this.geomtry,this.material),this.rootObject.add(this.object)}},{key:"update",value:function(e){this.geomtry.setDrawRange(0,e),this.positions.needsUpdate=!0,this.colors.needsUpdate=!0,this.positions.updateRange.count=e*this.positions.itemSize,this.colors.updateRange.count=e*this.colors.itemSize}},{key:"setAlpha",value:function(e){this.material.opacity=e}},{key:"setSize",value:function(e){this.material.size=e}}]),e}(),Zt=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ge;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,X,i))).points=new Gt(Oe.POINTS),n.sphereList=new Ut,n.cubeList=new Wt,n.object=new dt,n.object.add(n.points.rootObject),n.object.add(n.sphereList),n.object.add(n.cubeList),n.prevMessage=null,n.updateOptions(Object(c.a)({},Ge,i)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"getNormalizedIntensity",value:function(e){var t=this.options,a=t.maxIntensity,n=t.minIntensity;return(e-n)/(a-n)}},{key:"applyIntensityTransform",value:function(e,t){var a,n=this.options,i=n.channelName,o=n.maxColor,r=n.minColor,s=t.x,c=t.y,l=t.z;switch(i){case we.INTENSITY:a=this.getNormalizedIntensity(e);break;case we.X:a=this.getNormalizedIntensity(s);break;case we.Y:a=this.getNormalizedIntensity(c);break;case we.Z:a=this.getNormalizedIntensity(l)}var u=new V.k(r),d=a*new V.k(o).getHex()+(1-a)*u.getHex();return new V.k(d)}},{key:"getNormalizedAxisValue",value:function(e){var t=this.options,a=t.maxAxisValue,n=t.minAxisValue;return(e-n)/(a-n)}},{key:"applyAxisColorTransform",value:function(e,t){var a,n=this.options,i=n.axis,o=n.maxAxisValue,r=n.minAxisValue,s=t.x,c=t.y,l=t.z;switch(i){case ke.X:a=this.getNormalizedAxisValue(s);break;case ke.Y:a=this.getNormalizedAxisValue(c);break;case ke.Z:a=this.getNormalizedAxisValue(l)}var u=a*o+(1-a)*r;return new V.k(u)}},{key:"colorTransformer",value:function(e,t){var a=this.options,n=a.colorTransformer,i=a.flatColor;switch(n){case ye.INTENSITY:return this.applyIntensityTransform(e,t);case ye.AXIS_COLOR:return this.applyAxisColorTransform(e,t);case ye.FLAT_COLOR:return new V.k(i);default:return null}}},{key:"setupPoints",value:function(e){var t=e.j,a=e.position,n=e.color;this.points.colors.array[t]=n.r,this.points.positions.array[t++]=a.x,this.points.colors.array[t]=n.g,this.points.positions.array[t++]=a.y,this.points.colors.array[t]=n.b,this.points.positions.array[t++]=a.z}},{key:"hideAllObjects",value:function(){this.points.rootObject.visible=!1,this.sphereList.visible=!1,this.cubeList.visible=!1}},{key:"setStyleDimensions",value:function(e){if(e){var t=this.options,a=t.alpha,n=t.style,i=this.options.size,o=e.intensities,r=e.ranges.length,s=[],c=[];if(!(i<.001)&&i){this.hideAllObjects(),this.points.setup(n,i,a);for(var l=0,u=0;u<r;u++){var d=e.ranges[u];if(d>=e.range_min&&d<=e.range_max){var p=e.angle_min+u*e.angle_increment,h={x:d*Math.cos(p),y:d*Math.sin(p),z:0},b=this.colorTransformer(o[u],h);switch(n){case Oe.POINTS:case Oe.SQUARES:case Oe.FLAT_SQUARES:this.setupPoints({j:l,position:h,color:b}),l+=3;break;default:s.push(h),c.push(b)}}}var m={scale:{x:i,y:i,z:i}};switch(n){case Oe.SPHERES:this.sphereList.visible=!0,this.sphereList.updatePoints(s,c,m);break;case Oe.BOXES:this.cubeList.visible=!0,this.cubeList.updatePoints(s,c,m);break;default:this.points.rootObject.visible=!0,this.points.update(l/3)}}}}},{key:"updateOptions",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"updateOptions",this).call(this,e),this.setStyleDimensions(this.prevMessage)}},{key:"update",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"update",this).call(this,e),this.setStyleDimensions(e),this.prevMessage=e}}]),t}(P),Qt=function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0),t},Kt=function(e,t,a,n){for(var i=e.data,o=e.height,r=e.step,s=Uint8Array.from(i),c=new DataView(s.buffer),l=0,u=0;u<r*o;u+=t){for(var d=0;d<a.length;d++)n.data[l++]=c.getUint8(u+a[d]);3===a.length&&(n.data[l++]=255)}},Jt=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).geometry=new V.S,e.material=new V.K,e}return Object(b.a)(t,e),t}(pt),$t=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ze;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,B,Object(c.a)({},Ze,i)))).object=new Jt,n.object.material.transparent=!0,n.updateOptions(Object(c.a)({},Ze,i)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"onMessage",value:function(e){this.callback=e}},{key:"updateOptions",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"updateOptions",this).call(this,e);var a=this.options,n=a.alpha,i=a.drawBehind;this.object.material.opacity=n,this.object.material.side=i?V.q:V.y,this.object.material.needsUpdate=!0,this.prevMessage&&this.setCanvasData(this.prevMessage)}},{key:"updateCanvasDimensions",value:function(e){var t=e.info,a=t.height,n=t.origin,i=t.resolution,o=t.width;this.object.scale.set(o*i,-1*a*i,1);var r=o*i/2+n.position.x,s=a*i/2+n.position.y;this.object.position.set(r,s,0)}},{key:"setCanvasData",value:function(e){var t=this.options.colorScheme,a=e.data,n=e.info,i=n.height,o=n.width,r=new ImageData(o,i),s=null;switch(t){case ge.MAP:!function(e,t,a,n){for(var i=0;i<a;i++)for(var o=0;o<t;o++){var r=n[o+(a-i-1)*t],s=new DataView(Uint8Array.from([r]).buffer).getUint8(0),c=4*(o+i*t);if(s>=0&&s<=100){var l=255-255*s/100;e.data[c]=l,e.data[++c]=l,e.data[++c]=l,e.data[++c]=255}else s>=101&&s<=127?(e.data[c]=0,e.data[++c]=255,e.data[++c]=0,e.data[++c]=255):s>=128&&s<=254?(e.data[c]=255,e.data[++c]=255*(s-128)/126,e.data[++c]=0,e.data[++c]=255):(e.data[c]=112,e.data[++c]=137,e.data[++c]=134,e.data[++c]=255)}}(r,o,i,a),s=Qt(r);break;case ge.CONST_MAP:!function(e,t,a,n){for(var i=0;i<a;i++)for(var o=0;o<t;o++){var r=n[o+(a-i-1)*t],s=new DataView(Uint8Array.from([r]).buffer).getUint8(0),c=4*(o+i*t);if(0===s)e.data[c]=0,e.data[++c]=0,e.data[++c]=0,e.data[++c]=0;else if(s>=1&&s<=98){var l=255*s/100;e.data[c]=l,e.data[++c]=0,e.data[++c]=255-l,e.data[++c]=255}else 99===s?(e.data[c]=0,e.data[++c]=255,e.data[++c]=255,e.data[++c]=255):100===s?(e.data[c]=255,e.data[++c]=0,e.data[++c]=255,e.data[++c]=255):s>100&&s<=127?(e.data[c]=0,e.data[++c]=255,e.data[++c]=0,e.data[++c]=255):s>=128&&s<=254?(e.data[c]=255,e.data[++c]=255*(s-128)/126,e.data[++c]=0,e.data[++c]=255):(e.data[c]=112,e.data[++c]=137,e.data[++c]=134,e.data[++c]=255)}}(r,o,i,a),s=Qt(r);break;case ge.RAW:!function(e,t,a,n){for(var i=0;i<a;i++)for(var o=0;o<t;o++){var r=n[o+(a-i-1)*t],s=4*(o+i*t),c=new DataView(Uint8Array.from([r]).buffer).getUint8(0);e.data[s]=c,e.data[++s]=c,e.data[++s]=c,e.data[++s]=255}}(r,o,i,a),s=Qt(r)}this.object.material.map=new V.i(s),this.object.material.map.minFilter=V.O,this.object.material.map.magFilter=V.O,this.object.material.needsUpdate=!0,this.updateCanvasDimensions(e)}},{key:"update",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"update",this).call(this,e),this.callback&&this.callback(e),this.setCanvasData(e),this.prevMessage=e}}]),t}(P),ea=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Je;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,Y,Object(c.a)({},Je,i)))).object=null,n.objectPool=[],n.keepSize=100,n.currentObject=-1,n.setVizType(i.controlledObject),n.updateOptions(Object(c.a)({},Je,i)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"setVizType",value:function(e){this.object=e||new dt}},{key:"setKeepSize",value:function(e){var t=[];if(0!==e){if(e<this.keepSize&&e<this.objectPool.length){for(var a=this.objectPool.length-e,n=0;n<a;n++)this.object.remove(this.objectPool[n]);var i=this.objectPool.slice(this.objectPool.length-e,this.objectPool.length);t=Object(s.a)(i)}else t=Object(s.a)(this.objectPool);this.objectPool=t,this.keepSize=e,this.currentObject=this.objectPool.length-1}else this.keepSize=0}},{key:"removeAllObjects",value:function(){var e=this;this.objectPool.forEach(function(t,a){t.parent.remove(t),delete e.objectPool[a]}),this.objectPool=[]}},{key:"checkToleranceThresholdExceed",value:function(e){return 0===this.objectPool.length||function(e,t,a){var n=a.angleTolerance,i=a.positionTolerance,o=t.position,r=t.quaternion,s=e.position,c=e.quaternion,l=s.distanceTo(o)>i,u=c.angleTo(r)>n;return l||u}({position:this.objectPool[this.currentObject].position,quaternion:this.objectPool[this.currentObject].quaternion},e,this.options)}},{key:"getObject",value:function(){switch(this.options.type){case Ee:return new Ot;case ze:return new yt}return new V.P}},{key:"changeObjectPoolType",value:function(){var e=this,t=[];this.objectPool.forEach(function(a,n){var i=a.position,o=a.quaternion;a.parent.remove(a),delete e.objectPool[n];var r=e.getObject();r.position.set(i.x,i.y,i.z),r.quaternion.set(o.x,o.y,o.z,o.w),t.push(r),e.object.add(r),wt(r,e.options)}),this.objectPool=t}},{key:"updateOptions",value:function(e){var a=this,n=this.options.type;Object(x.a)(Object(p.a)(t.prototype),"updateOptions",this).call(this,e);var i=this.options,o=i.keep;i.type!==n&&this.changeObjectPoolType(),this.objectPool.forEach(function(e){wt(e,a.options)}),this.setKeepSize(o)}},{key:"update",value:function(e){if(Object(x.a)(Object(p.a)(t.prototype),"update",this).call(this,e),this.keepSize){var a=e.pose.pose,n=a.orientation,i=a.position,o={translation:i,rotation:n},r={position:new V.lb(i.x,i.y,i.z),quaternion:new V.W(n.x,n.y,n.z,n.w)};if(this.checkToleranceThresholdExceed(r)){var c=this.getObject();if(wt(c,this.options),this.objectPool.push(c),this.currentObject+=1,this.currentObject=V.G.clamp(this.currentObject,0,this.keepSize-1),this.object.add(c),ct(c,o),this.objectPool.length>this.keepSize){var l=this.objectPool[0];this.object.remove(l),delete this.objectPool[0];var u=this.objectPool.slice(1);this.objectPool=Object(s.a)(u)}}}else this.removeAllObjects()}}]),t}(P),ta=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ot;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,I,Object(c.a)({},ot,i)))).object=new V.B,n.updateOptions(Object(c.a)({},ot,i)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"update",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"update",this).call(this,e),this.object.children.forEach(function(e){e.parent.remove(e)}),this.object.children=[];for(var a=0;a<e.poses.length;a++)this.object.add(Et.getNewPrimitive(this.options));for(var n=0;n<e.poses.length;n++)ct(this.object.children[n],{translation:e.poses[n].position,rotation:e.poses[n].orientation}),wt(this.object.children[n],this.options)}}]),t}(P),aa=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$e;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,W,Object(c.a)({},$e,i)))).object=new dt,n.line=new jt(null,!0),n.updateOptions(Object(c.a)({},$e,i)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updateOptions",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"updateOptions",this).call(this,e);var a=this.options,n=a.alpha,i=a.color;this.line.setColor(new V.k(i)),this.line.setAlpha(n)}},{key:"update",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"update",this).call(this,e);var a=(e.poses||[]).map(function(e){return e.pose.position});this.line.updatePoints(a),this.object.add(this.line)}}]),t}(P),na=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qe;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,H,Object(c.a)({},qe,i)))).object=document.createElement("canvas"),n.shadowObject=document.createElement("canvas"),n.updateOptions(Object(c.a)({},qe,i)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"applyImageData",value:function(e){var t=e.encoding,a=e.height,n=e.width,i=n/a,o=this.object.getContext("2d"),r=this.shadowObject.getContext("2d"),s=r.createImageData(n,a);switch(t){case"bayer_rggb8":case"bayer_bggr8":case"bayer_gbrg8":case"bayer_grbg8":case"bayer_rggb16":case"bayer_bggr16":case"bayer_gbrg16":case"bayer_grbg16":case"8UC1":case"8SC1":case"mono8":Kt(e,1,[0,0,0],s);break;case"8UC3":case"8SC3":case"bgr8":Kt(e,3,[2,1,0],s);break;case"8UC4":case"8SC4":case"bgra8":Kt(e,4,[2,1,0,3],s);break;case"rgb8":Kt(e,3,[0,1,2],s);break;case"rgba8":Kt(e,4,[0,1,2,3],s)}o.clearRect(0,0,this.object.width,this.object.height),o.fillStyle="#000",o.fillRect(0,0,this.object.width,this.object.height),r.clearRect(0,0,this.shadowObject.width,this.shadowObject.height),r.putImageData(s,0,0);var c=this.object.width/i,l=this.object.height*i;i>=this.object.width/this.object.height?o.drawImage(this.shadowObject,0,0,n,a,0,(this.object.height-c)/2,this.object.width,c):o.drawImage(this.shadowObject,0,0,n,a,(this.object.width-l)/2,0,l,this.object.height)}},{key:"updateDimensions",value:function(e,t){this.object.width=e,this.object.height=t}},{key:"updateOptions",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"updateOptions",this).call(this,e);var a=this.options,n=a.defaultHeight,i=a.defaultWidth;this.object.width=i,this.object.height=n}},{key:"update",value:function(e){var t=e.height,a=e.width;this.shadowObject.width=a,this.shadowObject.height=t,this.applyImageData(e)}},{key:"hide",value:function(){this.object.style.visibility="hidden"}},{key:"show",value:function(){this.object.style.visibility="visible"}}]),t}(P),ia=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qe;Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e,a,G,Object(c.a)({},Qe,i)))).object=new dt,n.onChange=n.onChange.bind(Object(h.a)(n));var o=i.queueSize;return n.markerManager=new Xt(n.object,n.onChange),n.queueSize=o,n.updateOptions(Object(c.a)({},Qe,i)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updateOptions",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"updateOptions",this).call(this,e),this.markerManager.updateOptions(this.options,this)}},{key:"update",value:function(e){Object(x.a)(Object(p.a)(t.prototype),"update",this).call(this,e),this.markerManager.updateMarker(e)}},{key:"onChange",value:function(){this.callback&&this.callback()}},{key:"onNamespaceChange",value:function(e){this.callback=e}},{key:"reset",value:function(){this.markerManager.reset()}}]),t}(P),oa=a(101),ra=a.n(oa),sa=function(e){function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(l.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).vizWrapper=new V.B,e.add(e.vizWrapper),e.stats=new ra.a,e.stats.showPanel(0),e.initLights(),e.initGrid(),e.updateOptions(a),e}return Object(b.a)(t,e),Object(u.a)(t,[{key:"initLights",value:function(){var e=this;[[-1,0],[1,0],[0,-1],[0,1]].forEach(function(t){var a=new V.p(16777215,.4),n=Object(z.a)(t,2);a.position.x=n[0],a.position.y=n[1],a.position.z=1,e.add(a)});var t=new V.a(16777215,.2);this.add(t)}},{key:"initGrid",value:function(){this.grid=new V.A(0,0),this.add(this.grid)}},{key:"addObject",value:function(e){this.vizWrapper.add(e)}},{key:"addVisualization",value:function(e){var t=e.object;this.vizWrapper.getObjectById(t.id)||this.addObject(t)}},{key:"getObjectByName",value:function(e){return this.vizWrapper.getObjectByName(e)}},{key:"updateOptions",value:function(e){this.options=Object(c.a)({},_e,e);var t=this.options,a=t.backgroundColor,n=t.gridCenterlineColor,i=t.gridColor,o=t.gridDivisions,r=t.gridSize;this.grid.copy(new V.A(r,o,n,i)),this.grid.rotateX(-Math.PI/2),this.background=new V.k(a)}}]),t}(V.Z),ca=function(e,t){t=void 0!==t?t:document,this.enabled=!0,this.center=new V.lb,this.panSpeed=.01,this.zoomSpeed=.05,this.rotationSpeed=.005;var a=this,n=new V.lb,i=new V.lb,o=new V.d,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2},s=r.NONE,c=this.center,l=new V.H,u=new V.kb,d=new V.kb,p=new V.fb,h=new V.cb,b={type:"change"};function m(e){if(!1!==a.enabled){u.set(e.clientX,e.clientY);var t=u.x-d.x,n=u.y-d.y;s===r.ROTATE?a.rotate(i.set(-t,-n,0)):s===r.ZOOM?a.zoom(i.set(0,0,n)):s===r.PAN&&a.pan(i.set(-t,n,0)),d.set(e.clientX,e.clientY)}}function v(){t.removeEventListener("mousemove",m,!1),t.removeEventListener("mouseup",v,!1),t.removeEventListener("mouseout",v,!1),t.removeEventListener("dblclick",v,!1),s=r.NONE}function f(e){e.preventDefault(),a.zoom(i.set(0,0,e.deltaY>0?1:-1))}function g(e){!1!==a.enabled&&(0===e.button?s=r.ROTATE:1===e.button?s=r.ZOOM:2===e.button&&(s=r.PAN),d.set(e.clientX,e.clientY),t.addEventListener("mousemove",m,!1),t.addEventListener("mouseup",v,!1),t.addEventListener("mouseout",v,!1),t.addEventListener("dblclick",v,!1))}function O(e){e.preventDefault()}this.focus=function(t){var n;o.setFromObject(t),!1===o.isEmpty()?(o.getCenter(c),n=o.getBoundingSphere(h).radius):(c.setFromMatrixPosition(t.matrixWorld),n=.1),i.set(0,0,1),i.applyQuaternion(e.quaternion),i.multiplyScalar(4*n),e.position.copy(c).add(i),a.dispatchEvent(b)},this.pan=function(t){var n=e.zoom;t.multiplyScalar(a.panSpeed/n),t.applyMatrix3(l.getNormalMatrix(e.matrix)),e.position.add(t),c.add(t),a.dispatchEvent(b)},this.zoom=function(t){e.zoom-=(t.z||0)*e.zoom*.1,e.updateProjectionMatrix(),a.dispatchEvent(b)},this.rotate=function(t){n.copy(e.position).sub(c),p.setFromVector3(n),p.theta+=t.x*a.rotationSpeed,p.makeSafe(),n.setFromSpherical(p),e.position.copy(c).add(n),e.lookAt(c),a.dispatchEvent(b)},t.addEventListener("contextmenu",O,!1),t.addEventListener("mousedown",g,!1),t.addEventListener("wheel",f,!1);var y=[new V.lb,new V.lb,new V.lb],j=[new V.lb,new V.lb,new V.lb],k=null;function w(e){if(!1!==a.enabled){switch(e.touches.length){case 1:y[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),y[1].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio);break;case 2:y[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),y[1].set(e.touches[1].pageX,e.touches[1].pageY,0).divideScalar(window.devicePixelRatio),k=y[0].distanceTo(y[1])}j[0].copy(y[0]),j[1].copy(y[1])}}function E(e){if(!1!==a.enabled){switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:y[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),y[1].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),a.rotate(y[0].sub(r(y[0],j)).multiplyScalar(-1));break;case 2:y[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),y[1].set(e.touches[1].pageX,e.touches[1].pageY,0).divideScalar(window.devicePixelRatio);var t=y[0].distanceTo(y[1]);a.zoom(i.set(0,0,k-t)),k=t;var n=y[0].clone().sub(r(y[0],j)),o=y[1].clone().sub(r(y[1],j));n.x=-n.x,o.x=-o.x,a.pan(n.add(o))}j[0].copy(y[0]),j[1].copy(y[1])}function r(e,t){var a=t[0];for(var n in t)a.distanceTo(e)>t[n].distanceTo(e)&&(a=t[n]);return a}}t.addEventListener("touchstart",w,!1),t.addEventListener("touchmove",E,!1),this.dispose=function(){t.removeEventListener("contextmenu",O,!1),t.removeEventListener("mousedown",g,!1),t.removeEventListener("wheel",f,!1),t.removeEventListener("mousemove",m,!1),t.removeEventListener("mouseup",v,!1),t.removeEventListener("mouseout",v,!1),t.removeEventListener("dblclick",v,!1),t.removeEventListener("touchstart",w,!1),t.removeEventListener("touchmove",E,!1)}};(ca.prototype=Object.create(V.s.prototype)).constructor=ca;var la=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(l.a)(this,e),this.options=Object(c.a)({},_e,a),this.scene=t||new sa,this.previousWidth=0,this.previousHeight=0,this.initCamera(),this.animate=this.animate.bind(this),this.onWindowResize=this.onWindowResize.bind(this)}return Object(u.a)(e,[{key:"animate",value:function(){this.scene.stats.begin(),this.scene.updateMatrixWorld(),this.renderer.render(this.scene,this.camera),this.scene.stats.end(),requestAnimationFrame(this.animate)}},{key:"initCamera",value:function(){this.camera=new V.Q(-100,100,100,-100,.1,1e3),this.camera.zoom=.5,this.camera.position.set(0,0,10),this.camera.lookAt(new V.lb),this.scene.add(this.camera)}},{key:"setContainer",value:function(e){this.container=e,this.initRenderer(e),this.controls=new ca(this.camera,this.container),this.controls.enableDamping=!0,window.addEventListener("resize",this.onWindowResize),requestAnimationFrame(this.animate),this.onWindowResize()}},{key:"initRenderer",value:function(){var e=new V.ob({antialias:!0});e.autoClear=!1,e.autoUpdateScene=!1,e.setPixelRatio(window.devicePixelRatio),e.setSize(this.container.offsetWidth,this.container.offsetHeight),this.renderer=e,this.container.appendChild(e.domElement)}},{key:"updateOptions",value:function(e){this.options=Object(c.a)({},this.options,e),this.scene.updateOptions(this.options)}},{key:"destroy",value:function(){window.removeEventListener("resize",this.onWindowResize)}},{key:"onWindowResize",value:function(){var e=this.camera,t=this.container,a=t.offsetHeight,n=t.offsetWidth;if(Math.abs(n-this.previousWidth)>10||Math.abs(a-this.previousHeight)>10){var i=n/100,o=a/100;e.left=-i/2,e.right=i/2,e.top=o/2,e.bottom=-o/2,e.updateProjectionMatrix(),this.renderer.setSize(n,a),this.previousWidth=n,this.previousHeight=a}}},{key:"addVisualization",value:function(e){this.scene.addVisualization(e)}}]),e}(),ua=a(109),da=function(e,t){t=void 0!==t?t:document,this.enabled=!0,this.center=new V.lb,this.panSpeed=.002,this.zoomSpeed=.1,this.rotationSpeed=.005;var a=this,n=new V.lb,i=new V.lb,o=new V.d,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2},s=r.NONE,c=this.center,l=new V.H,u=new V.kb,d=new V.kb,p=new V.fb,h=new V.cb,b={type:"change"};function m(e){!1!==a.enabled&&(0===e.button?s=r.ROTATE:1===e.button?s=r.ZOOM:2===e.button&&(s=r.PAN),d.set(e.clientX,e.clientY),t.addEventListener("mousemove",v,!1),t.addEventListener("mouseup",f,!1),t.addEventListener("mouseout",f,!1),t.addEventListener("dblclick",f,!1))}function v(e){if(!1!==a.enabled){u.set(e.clientX,e.clientY);var t=u.x-d.x,n=u.y-d.y;s===r.ROTATE?a.rotate(i.set(-t,-n,0)):s===r.ZOOM?a.zoom(i.set(0,0,n)):s===r.PAN&&a.pan(i.set(-t,n,0)),d.set(e.clientX,e.clientY)}}function f(e){t.removeEventListener("mousemove",v,!1),t.removeEventListener("mouseup",f,!1),t.removeEventListener("mouseout",f,!1),t.removeEventListener("dblclick",f,!1),s=r.NONE}function g(e){e.preventDefault(),a.zoom(i.set(0,0,e.deltaY>0?1:-1))}function O(e){e.preventDefault()}this.focus=function(t){var n;o.setFromObject(t),!1===o.isEmpty()?(o.getCenter(c),n=o.getBoundingSphere(h).radius):(c.setFromMatrixPosition(t.matrixWorld),n=.1),i.set(0,0,1),i.applyQuaternion(e.quaternion),i.multiplyScalar(4*n),e.position.copy(c).add(i),a.dispatchEvent(b)},this.pan=function(t){var n=e.position.distanceTo(c);t.multiplyScalar(n*a.panSpeed),t.applyMatrix3(l.getNormalMatrix(e.matrix)),e.position.add(t),c.add(t),a.dispatchEvent(b)},this.zoom=function(t){var n=e.position.distanceTo(c);t.multiplyScalar(n*a.zoomSpeed),t.length()>n||(t.applyMatrix3(l.getNormalMatrix(e.matrix)),e.position.add(t),a.dispatchEvent(b))},this.rotate=function(t){n.copy(e.position).sub(c),p.setFromCartesianCoords(-1*n.x,n.z,n.y),p.theta+=t.x*a.rotationSpeed,p.phi+=t.y*a.rotationSpeed,p.makeSafe();var i=n.setFromSpherical(p);n.set(-1*i.x,i.z,i.y),e.position.copy(c).add(n),e.lookAt(c),a.dispatchEvent(b)},this.dispose=function(){t.removeEventListener("contextmenu",O,!1),t.removeEventListener("mousedown",m,!1),t.removeEventListener("wheel",g,!1),t.removeEventListener("mousemove",v,!1),t.removeEventListener("mouseup",f,!1),t.removeEventListener("mouseout",f,!1),t.removeEventListener("dblclick",f,!1),t.removeEventListener("touchstart",w,!1),t.removeEventListener("touchmove",E,!1)},t.addEventListener("contextmenu",O,!1),t.addEventListener("mousedown",m,!1),t.addEventListener("wheel",g,!1);var y=[new V.lb,new V.lb,new V.lb],j=[new V.lb,new V.lb,new V.lb],k=null;function w(e){if(!1!==a.enabled){switch(e.touches.length){case 1:y[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),y[1].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio);break;case 2:y[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),y[1].set(e.touches[1].pageX,e.touches[1].pageY,0).divideScalar(window.devicePixelRatio),k=y[0].distanceTo(y[1])}j[0].copy(y[0]),j[1].copy(y[1])}}function E(e){if(!1!==a.enabled){switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:y[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),y[1].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),a.rotate(y[0].sub(r(y[0],j)).multiplyScalar(-1));break;case 2:y[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),y[1].set(e.touches[1].pageX,e.touches[1].pageY,0).divideScalar(window.devicePixelRatio);var t=y[0].distanceTo(y[1]);a.zoom(i.set(0,0,k-t)),k=t;var n=y[0].clone().sub(r(y[0],j)),o=y[1].clone().sub(r(y[1],j));n.x=-n.x,o.x=-o.x,a.pan(n.add(o))}j[0].copy(y[0]),j[1].copy(y[1])}function r(e,t){var a=t[0];for(var n in t)a.distanceTo(e)>t[n].distanceTo(e)&&(a=t[n]);return a}}t.addEventListener("touchstart",w,!1),t.addEventListener("touchmove",E,!1)};(da.prototype=Object.create(V.s.prototype)).constructor=da;var pa=window.ResizeObserver||ua.a,ha=function(){function e(t){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(l.a)(this,e),this.options=Object(c.a)({},_e,n),this.scene=t||new sa(this.options),this.previousWidth=0,this.previousHeight=0,this.ro=new pa(function(e){e.length>0&&a.onWindowResize()}),this.initCamera(),this.animate=this.animate.bind(this),this.onWindowResize=this.onWindowResize.bind(this)}return Object(u.a)(e,[{key:"animate",value:function(){this.scene.stats.begin(),this.scene.updateMatrixWorld(),this.renderer.render(this.scene,this.camera),this.scene.stats.end(),requestAnimationFrame(this.animate)}},{key:"initCamera",value:function(){this.camera=new V.R(50,1,.01,1e3),this.camera.position.set(0,5,10),this.camera.up=new V.lb(0,0,1),this.camera.lookAt(new V.lb),this.scene.add(this.camera)}},{key:"setContainer",value:function(e){this.container=e,this.initRenderer(e),this.controls=new da(this.camera,this.container),this.controls.enableDamping=!0,this.ro.observe(this.container),requestAnimationFrame(this.animate),this.onWindowResize()}},{key:"initRenderer",value:function(){var e=new V.ob({antialias:!0});e.autoClear=!1,e.autoUpdateScene=!1,e.setPixelRatio(window.devicePixelRatio),e.setSize(this.container.offsetWidth,this.container.offsetHeight),this.renderer=e,this.container.appendChild(e.domElement)}},{key:"updateOptions",value:function(e){this.options=Object(c.a)({},this.options,e),this.scene.updateOptions(this.options)}},{key:"destroy",value:function(){}},{key:"onWindowResize",value:function(){var e=this.camera,t=this.container,a=t.offsetHeight,n=t.offsetWidth;(Math.abs(n-this.previousWidth)>10||Math.abs(a-this.previousHeight)>10)&&(e.aspect=n/a,e.updateProjectionMatrix(),this.renderer.setSize(n,a),this.previousWidth=n,this.previousHeight=a)}},{key:"addVisualization",value:function(e){this.scene.addVisualization(e)}}]),e}(),ba=function(e){function t(e,a){var n;Object(l.a)(this,t);var i=(n=Object(d.a)(this,Object(p.a)(t).call(this,null,Object(c.a)({},Fe,a)))).options.onFramesListUpdate;return n.ros=e,n.framesList=[],n.onFramesListUpdate=i||function(){},n.initRosEvents(),n.getTFMessages=n.getTFMessages.bind(Object(h.a)(n)),n.setFrameTransform=n.setFrameTransform.bind(Object(h.a)(n)),n.addRobot=n.addRobot.bind(Object(h.a)(n)),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"initRosEvents",value:function(){var e=this;this.ros.on("connection",function(){e.ros.getTopics(function(t){["/tf","/tf_static"].forEach(function(a){new S.a.Topic({ros:e.ros,name:a,messageType:t.types[t.topics.indexOf(a)]}).subscribe(e.getTFMessages)})})})}},{key:"getTFMessages",value:function(e){var t=this;e.transforms.forEach(function(e){var a=e.header.frame_id,n=e.child_frame_id,i=e.transform,o=i.rotation,r=o.w,s=o.x,c=o.y,l=o.z,u=i.translation,d=u.x,p=u.y,h=u.z,b=[t.getObjectOrCreate(n),t.getObjectOrCreate(a)],m=b[0];b[1].add(m),m.position.set(d,p,h),m.quaternion.set(s,c,l,r),[a,n].forEach(function(e){-1===t.framesList.indexOf(e)&&t.framesList.push(e)})}),this.setFrameTransform()}},{key:"getObjectOrCreate",value:function(e){-1===this.framesList.indexOf(e)&&(this.framesList.push(e),this.onFramesListUpdate(this.framesList));var t=this.scene.getObjectByName(e);if(t)return t;var a=new V.B;return a.name=e,this.scene.addObject(a),a}},{key:"setFrameTransform",value:function(){var e=this.options.selectedFrame,t=this.scene.vizWrapper;if(e){var a=t.getObjectByName(e);if(a){t.position.set(0,0,0),t.quaternion.set(0,0,0,1),t.updateMatrixWorld();var n=new V.lb,i=new V.W;a.getWorldQuaternion(i);var o=i.w,r=i.x,s=i.y,c=i.z;t.quaternion.set(-r,-s,-c,o),t.updateMatrixWorld(),a.getWorldPosition(n);var l=n.negate();t.position.set(l.x,l.y,l.z)}}}},{key:"addVisualization",value:function(e){var a=this;Object(x.a)(Object(p.a)(t.prototype),"addVisualization",this).call(this,e),e.onHeaderChange=function(t){a.getObjectOrCreate(t).add(e.object)}}},{key:"addRobot",value:function(e){var a=this;e.load(function(n){Nt.onComplete(n),Object(x.a)(Object(p.a)(t.prototype),"addVisualization",a).call(a,e);var i=function(e){var t=n.children[0].links[e],i=a.scene.getObjectByName(t.name);i&&t.children.forEach(function(e){i.add(e)})};for(var o in n.children[0].links)i(o)})}},{key:"setFixedFrame",value:function(){}}]),t}(ha),ma={CollisionObject:bt,DisplayTrajectory:mt,PlanningScene:vt,Point:Mt,PointCloud:It,Polygon:zt,Pose:Et,PoseArray:ta,Tf:St,RobotModel:Nt,MarkerArray:qt,LaserScan:Zt,Map:$t,Odometry:ea,Path:aa,Image:na,Marker:ia,Scene:sa,Viewer2d:la,Viewer3d:ha,TfViewer:ba},va=a(16),fa={INITIAL:"Idle. Not Connected",CONNECTING:"Connecting",CONNECTED:"Connected successfully",CONNECTION_ERROR:"Error in connection"},ga="https://github.com/rapyuta-robotics/zethus/wiki/",Oa=["tf/tfMessage","tf2_msgs/TFMessage"],ya=function(e){return v.a.filter(e,function(e){return v.a.includes(Oa,e.messageType)})},ja=[{type:"Image",icon:"/image/icons/icon_image.svg",messageTypes:[H],description:'Creates a container to visualize the image data represented by a sensor_msgs/Image topic.\n    ![](/image/viz/viz-image.png "")',docsLink:"".concat(ga,"Image")},{type:"LaserScan",icon:"/image/icons/icon_laser_scan.svg",messageTypes:[X],description:'Adds a visualization represented by a sensor_msgs/LaserScan topic to the scene.\n    ![](/image/viz/viz-laserscan.png "")',docsLink:"".concat(ga,"Laser-Scan")},{type:"Map",icon:"/image/icons/icon_map.svg",messageTypes:[B],description:'Adds a visualization represented by a nav_msgs/OccupancyGrid topic to the scene.\n    ![](/image/viz/viz-map.png "")',docsLink:"".concat(ga,"Map")},{type:"Marker",icon:"/image/icons/icon_marker.svg",messageTypes:[G],description:'Adds a visualization represented by a visualization_msgs/Marker or visualization_msgs/MarkerArray topic to the scene.\n    ![](/image/viz/viz-marker.png "")',docsLink:"".concat(ga,"Marker")},{type:"MarkerArray",icon:"/image/icons/icon_marker_array.svg",messageTypes:[Z],description:'Adds a visualization represented by a visualization_msgs/Marker or visualization_msgs/MarkerArray topic to the scene.\n    ![](/image/viz/viz-markerarray.png "")',docsLink:"".concat(ga,"Marker-Array")},{type:"Odometry",icon:"/image/icons/icon_odometry.svg",messageTypes:[Y],description:'Adds a visualization represented by a nav_msgs/Odometry topic to the scene.\n    ![](/image/viz/viz-odometry.png "")',docsLink:"".concat(ga,"Odometry"),isDisplay:!1},{type:"Path",icon:"/image/icons/icon_path.svg",messageTypes:[W],description:'Adds a visualization represented by a nav_msgs/Path topic to the scene.\n    ![](/image/viz/viz-path.png "")',docsLink:"".concat(ga,"Path")},{type:"Point",icon:"/image/icons/icon_point.svg",messageTypes:[A],description:'Adds a visualization represented by a geometry_msgs/PointStamped topic to the scene.\n    ![](/image/viz/viz-point.png "")',docsLink:"".concat(ga,"Point")},{type:"PointCloud",icon:"/image/icons/icon_pointcloud_2.svg",messageTypes:[q],description:'Adds a visualization represented by a sensor_msgs/PointCloud2 topic to the scene.\n    ![](/image/viz/viz-pointcloud.png "")',docsLink:"".concat(ga,"Point-Cloud-2")},{type:"Pose",icon:"/image/icons/icon_pose.svg",messageTypes:[_],description:'Adds a visualization represented by a geometry_msgs/PoseStamped topic to the scene.\n    ![](/image/viz/viz-pose.png "")',docsLink:"".concat(ga,"Pose")},{type:"PoseArray",icon:"/image/icons/icon_pose_array.svg",messageTypes:[I],description:'Adds a visualization represented by a geometry_msgs/PoseArray topic to the scene. An array of pose is added to the scene based on the Shape type selected.\n    ![](/image/viz/viz-posearray.png "")',docsLink:"".concat(ga,"Pose-Array")},{type:"RobotModel",icon:"/image/icons/icon_robot_model.svg",messageTypes:["robot_description"],description:'Adds a robot model to the scene from a ros parameter.\n    ![](/image/viz/viz-robotmodel.png "")',docsLink:"".concat(ga,"Robot-Model")},{type:"Tf",icon:"/image/icons/icon_tf.svg",messageTypes:Oa,description:'Adds a visualization represented by a tf/tfMessage and tf2_msgs/TFMessage topic to the scene.\n    ![](/image/viz/viz-tf.png "")',docsLink:"".concat(ga,"Tf")}],ka={panels:{sidebar:{display:!0}},ros:{endpoint:"ws://localhost:9090"},visualizations:[],globalOptions:{display:!0,backgroundColor:{display:!0,value:_e.backgroundColor},fixedFrame:{display:!0,value:"world"},grid:{display:!0,size:_e.gridSize,divisions:_e.gridDivisions,color:_e.gridColor,centerlineColor:_e.gridCenterlineColor}},tools:{mode:"controls",controls:{display:!1,enabled:!0},measure:{display:!1},custom:[{name:"Nav goal",type:"publishPose",topic:"/navgoal"},{name:"Nav goal",type:"publishPoseWithCovariance",topic:"initialpose"}]}};function wa(e){var t=this.props,a=t.options.key,n=t.updateVizOptions,i=e.target,o=i.checked,r=i.dataset.id,s=i.value;n(a,Object(va.a)({},r,v.a.has(e.target,"checked")?o:s))}var Ea=a(10),za=a(11);function xa(){var e=Object(Ea.a)(["\n  svg {\n    height: 40px;\n    display: block;\n  }\n"]);return xa=function(){return e},e}function Ca(){var e=Object(Ea.a)(["\n  background-color: #fff;\n  width: 400px;\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n"]);return Ca=function(){return e},e}function Sa(){var e=Object(Ea.a)(["\n          background-color: #000000;\n        "]);return Sa=function(){return e},e}function Ta(){var e=Object(Ea.a)(["\n          background-color: #ff3e3c;\n        "]);return Ta=function(){return e},e}function Pa(){var e=Object(Ea.a)(["\n          background-color: #f9c351;\n          animation: "," normal 1s infinite ease-in-out;\n        "]);return Pa=function(){return e},e}function Va(){var e=Object(Ea.a)(["\n          background-color: #3e991c;\n        "]);return Va=function(){return e},e}function Na(){var e=Object(Ea.a)(["\n  width: 8px;\n  height: 8px;\n  border-radius: 4px;\n  margin: 0 10px -2px 0;\n  ","\n"]);return Na=function(){return e},e}function Ra(){var e=Object(Ea.a)(["\n  from, to {\n    opacity: 0;\n  }\n\n  50% {\n    opacity: 1;\n  }\n"]);return Ra=function(){return e},e}function Ma(){var e=Object(Ea.a)(["\n  padding: 0 20px;\n"]);return Ma=function(){return e},e}function Aa(){var e=Object(Ea.a)(["\n  display: flex;\n  min-height: 30px;\n  align-items: center;\n  padding: 3px 0;\n  font-size: ",";\n\n  ",", "," {\n    height: 26px;\n  }\n"]);return Aa=function(){return e},e}function La(){var e=Object(Ea.a)(["\n  width: 50%;\n"]);return La=function(){return e},e}function Ia(){var e=Object(Ea.a)(["\n  ","\n"]);return Ia=function(){return e},e}function _a(){var e=Object(Ea.a)(["\n  ","\n"]);return _a=function(){return e},e}function Fa(){var e=Object(Ea.a)(["\n      border: 1px solid ",";\n    "]);return Fa=function(){return e},e}function Da(){var e=Object(Ea.a)(["\n  font-size: 14px;\n  color: ",";\n  display: block;\n  margin: 0 0 5px;\n"]);return Da=function(){return e},e}function Ua(){var e=Object(Ea.a)(["\n  padding-top: 11px;\n  padding-bottom: 11px;\n"]);return Ua=function(){return e},e}function Ba(){var e=Object(Ea.a)(["\n  border: 0;\n  margin: 0;\n  padding: 6px 20px;\n  border-radius: 4px;\n  color: white;\n  background-color: ",";\n  font-size: 16px;\n  &[disabled] {\n    background-color: ",";\n  }\n"]);return Ba=function(){return e},e}function Ya(){var e=Object(Ea.a)(["\n      border: 1px solid ",";\n      border-bottom: 1px solid #fff;\n    "]);return Ya=function(){return e},e}function Wa(){var e=Object(Ea.a)(["\n  margin: 0 10px -1px;\n  background-color: transparent;\n  border: 1px solid ",";\n  border-bottom: 1px solid ",";\n  border-radius: 4px 4px 0 0;\n  color: inherit;\n  padding: 5px 10px 10px;\n  ","\n"]);return Wa=function(){return e},e}function Ha(){var e=Object(Ea.a)(["\n  display: flex;\n  border-bottom: 1px solid ",";\n  flex-shrink: 0;\n"]);return Ha=function(){return e},e}function Xa(){var e=Object(Ea.a)(["\n  padding: 15px 20px;\n"]);return Xa=function(){return e},e}function qa(){var e=Object(Ea.a)(["\n  width: 0;\n  flex-grow: 1;\n  flex-shrink: 1;\n"]);return qa=function(){return e},e}function Ga(){var e=Object(Ea.a)(["\n  display: flex;\n  background-color: #000;\n  height: 100vh;\n  overflow-y: hidden;\n  width: 100%;\n"]);return Ga=function(){return e},e}function Za(){var e=Object(Ea.a)(["\n  flex-grow: 1;\n"]);return Za=function(){return e},e}function Qa(){var e=Object(Ea.a)(["\n  width: 10px;\n"]);return Qa=function(){return e},e}function Ka(){var e=Object(Ea.a)(["\n  display: flex;\n"]);return Ka=function(){return e},e}function Ja(){var e=Object(Ea.a)(["\n  width: 100%;\n  height: 0;\n  border: 0;\n  margin: 0;\n  border-bottom: 1px solid ",";\n"]);return Ja=function(){return e},e}function $a(){var e=Object(Ea.a)(["\n  color: ",";\n"]);return $a=function(){return e},e}function en(){var e=Object(Ea.a)(["\n  line-height: 1.5;\n"]);return en=function(){return e},e}function tn(){var e=Object(Ea.a)(["\n  cursor: pointer;\n  font-size: inherit;\n  font-family: inherit;\n  outline: 0;\n\n  &:active {\n    outline: 0;\n  }\n"]);return tn=function(){return e},e}var an=za.b.button(tn()),nn=za.b.p(en()),on=za.b.a($a(),"#dc1d30"),rn=za.b.hr(Ja(),"#dddddd"),sn=za.b.div(Ka()),cn=za.b.div(Qa()),ln=za.b.div(Za()),un=za.b.div(Ga()),dn=za.b.div(qa()),pn=za.b.div(Xa()),hn=za.b.div(Ha(),"#dddddd"),bn=Object(za.b)(an)(Wa(),"#dddddd","#dddddd",function(e){return e.selected&&Object(za.a)(Ya(),"#dddddd")}),mn=Object(za.b)(an)(Ba(),"#dc1d30","#dddddd"),vn=za.b.div(Ua()),fn=za.b.label(Da(),"#666666"),gn="\n  height: 32px;\n  width: 100%;\n  flex-grow: 1;\n  flex-shrink: 1;\n  background-color: ".concat("#f6f6f6",";\n  border: 1px solid ").concat("#f6f6f6",";\n  color: ").concat("#444444",";\n  border-radius: 4px;\n  padding: 0 8px;\n  font-size: inherit;\n  font-family: inherit;\n  outline: 0;\n\n  &:active {\n    outline: 0;\n  }\n  :active,\n  :focus {\n    outline: 0;\n    border: 1px solid ").concat("#013c89",";\n  }\n  ").concat(function(e){return e.error&&Object(za.a)(Fa(),"#dc1d30")},"\n  [disabled] {\n    cursor: not-allowed;\n  }\n"),On=za.b.input(_a(),gn),yn=za.b.select(Ia(),gn),jn=za.b.div(La()),kn=za.b.div(Aa(),"0.7rem",On,yn),wn=za.b.div(Ma()),En=Object(za.c)(Ra()),zn=za.b.span(Na(),function(e){switch(e.status){case fa.CONNECTED:return Object(za.a)(Va());case fa.CONNECTING:return Object(za.a)(Pa(),En);case fa.CONNECTION_ERROR:return Object(za.a)(Ta());default:return Object(za.a)(Sa())}}),xn=za.b.div(Ca()),Cn=Object(za.b)(pn)(xa());function Sn(){var e=Object(Ea.a)(["\n  padding-left: 30px;\n"]);return Sn=function(){return e},e}function Tn(){var e=Object(Ea.a)(["\n  text-align: left;\n  width: 100%;\n  font-size: 16px;\n  border: 0;\n  background: transparent;\n  padding: 10px;\n  display: flex;\n  align-items: center;\n\n  .reactSelect {\n    color: ",";\n  }\n\n  &:hover {\n    color: ",";\n    background-color: ",";\n    .reactSelect {\n      color: ",";\n    }\n  }\n\n  ","\n"]);return Tn=function(){return e},e}function Pn(){var e=Object(Ea.a)(["\n  display: flex;\n  flex-grow: 1;\n  flex-shrink: 1;\n  height: 0;\n  flex-direction: column;\n"]);return Pn=function(){return e},e}function Vn(){var e=Object(Ea.a)(["\n  display: flex;\n  align-items: center;\n  text-transform: uppercase;\n  margin-bottom: 5px;\n"]);return Vn=function(){return e},e}function Nn(){var e=Object(Ea.a)(["\n  border-left: 1px solid ",";\n  padding: 0 0 0 20px;\n  flex: 1 0 50%;\n  overflow-y: auto;\n\n  h4 {\n    margin-top: 10px;\n    margin-bottom: 8px;\n    font-size: 22px;\n  }\n\n  img {\n    max-width: 100%;\n  }\n\n  & > div {\n    margin-bottom: 8px;\n  }\n"]);return Nn=function(){return e},e}function Rn(){var e=Object(Ea.a)(["\n  flex: 1 0 50%;\n  overflow-y: auto;\n"]);return Rn=function(){return e},e}function Mn(){var e=Object(Ea.a)(["\n  display: flex;\n  flex-grow: 1;\n  overflow: hidden;\n"]);return Mn=function(){return e},e}function An(){var e=Object(Ea.a)(["\n  padding: 10px;\n  opacity: 0.4;\n  cursor: not-allowed;\n"]);return An=function(){return e},e}function Ln(){var e=Object(Ea.a)(["\n  padding-left: 30px;\n  font-style: italic;\n"]);return Ln=function(){return e},e}function In(){var e=Object(Ea.a)(["\n  display: flex;\n  flex-shrink: 0;\n  padding: 10px 0 0;\n\n  button {\n    margin-left: 10px;\n  }\n"]);return In=function(){return e},e}function _n(){var e=Object(Ea.a)(["\n  margin-bottom: 6px;\n  margin-top: 0;\n"]);return _n=function(){return e},e}function Fn(){var e=Object(Ea.a)(["\n  width: 1000px;\n  margin: 100px auto;\n  height: 600px;\n  background-color: #ffffff;\n  box-shadow: 0 0 40px rgba(0, 0, 0, 0.08);\n  border-radius: 8px;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n"]);return Fn=function(){return e},e}function Dn(){var e=Object(Ea.a)(["\n  position: absolute;\n  z-index: 1000;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(255, 255, 255, 0.9);\n"]);return Dn=function(){return e},e}var Un=za.b.div(Dn()),Bn=za.b.div(Fn()),Yn=za.b.h2(_n()),Wn=za.b.div(In()),Hn=Object(za.b)(nn)(Ln()),Xn=Object(za.b)(sn)(An()),qn=za.b.div(Mn()),Gn=za.b.div(Rn()),Zn=za.b.div(Nn(),"#dddddd"),Qn=za.b.h4(Vn()),Kn=za.b.form(Pn()),Jn=Object(za.b)(an)(Tn(),"#444444","#dc1d30","#f6f6f6","#444444",function(e){return e.selected&&"\n    color: ".concat("#dc1d30",";\n    background-color: ").concat("#f6f6f6",";\n  ")}),$n=Object(za.b)(Jn)(Sn()),ei=a(108);function ti(){var e=Object(Ea.a)(["\n      transform: rotate(-90deg);\n    "]);return ti=function(){return e},e}function ai(){var e=Object(Ea.a)(["\n  background-color: transparent;\n  border: 0;\n  padding: 0;\n  margin: 0 3px 0 0;\n  width: 20px;\n  height: 20px;\n  img {\n    width: 14px;\n  }\n  ","\n"]);return ai=function(){return e},e}function ni(){var e=Object(Ea.a)(["\n  display: flex;\n  margin-top: 8px;\n\n  button {\n    background: ",";\n    border: 0;\n    border-radius: 4px;\n    color: ",";\n    padding: 5px 10px;\n    font-size: 0.6rem;\n    &:hover {\n      background-color: ",";\n      color: #ffffff;\n    }\n    & + button {\n      margin-left: 10px;\n    }\n  }\n"]);return ni=function(){return e},e}function ii(){var e=Object(Ea.a)(["\n  padding: 10px 0;\n  border-bottom: 1px solid ",";\n"]);return ii=function(){return e},e}function oi(){var e=Object(Ea.a)(["\n  pointer-events: none;\n  user-select: none;\n"]);return oi=function(){return e},e}function ri(){var e=Object(Ea.a)(["\n  display: flex;\n  font-size: 14px;\n  padding: 2px 5px;\n  min-height: 25px;\n  border-bottom: 1px solid ",";\n  word-break: break-all;\n  overflow: hidden;\n"]);return ri=function(){return e},e}function si(){var e=Object(Ea.a)(["\n  margin-bottom: 10px;\n  align-items: center;\n"]);return si=function(){return e},e}function ci(){var e=Object(Ea.a)(["\n  display: flex;\n  background-color: #fff;\n  flex-direction: column;\n  cursor: move;\n  border-radius: 4px;\n  overflow: hidden;\n  height: 100%;\n  width: 100%;\n  border: 1px solid ",";\n\n  canvas {\n    width: 100%;\n    height: 100%;\n  }\n"]);return ci=function(){return e},e}function li(){var e=Object(Ea.a)(["\n  width: 20px;\n  height: 20px;\n  display: inline-block;\n  background-color: ",";\n  margin-right: 10px;\n  border-radius: 4px;\n"]);return li=function(){return e},e}function ui(){var e=Object(Ea.a)(["\n  margin-top: 8px;\n  margin-left: 24px;\n"]);return ui=function(){return e},e}function di(){var e=Object(Ea.a)(["\n  overflow-y: auto;\n"]);return di=function(){return e},e}function pi(){var e=Object(Ea.a)(["\n  cursor: pointer;\n  background-color: transparent;\n  border: 0;\n  color: inherit;\n  text-decoration: underline;\n  font-size: inherit;\n  font-family: inherit;\n  &:hover {\n    text-decoration: none;\n  }\n"]);return pi=function(){return e},e}Object(za.b)(an)(pi());var hi,bi=Object(za.b)(pn)(di()),mi=za.b.div(ui()),vi=za.b.img(li(),"#f6f6f6"),fi=za.b.div(ci(),"#dddddd"),gi=Object(za.b)(sn)(si()),Oi=za.b.div(ri(),"#dddddd"),yi=(za.b.div(oi()),za.b.div(ii(),"#f6f6f6")),ji=za.b.div(ni(),"#f6f6f6","#888888","#dc1d30"),ki=Object(za.b)(an)(ai(),function(e){return e.collapsed&&Object(za.a)(ti())}),wi={container:function(e){return Object(c.a)({},e,{fontSize:"16px",width:"250px"})},control:function(e){return Object(c.a)({},e,{border:"1px solid #dddddd"})}},Ei=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.rosParams,a=e.selectedViz,n=e.selectViz,i=e.topics,o=e.vizDetails,s=v.a.get(a,"topicName"),c="RobotModel"===v.a.get(a,"vizType");return"RobotModel"===o.type?r.a.createElement("div",null,r.a.createElement(Qn,null,r.a.createElement(vi,{src:o.icon,alt:""}),o.type),r.a.createElement($n,{type:"button",selected:c},r.a.createElement(ei.a,{isSearchable:!0,className:"reactSelect",styles:wi,value:s&&c?{label:s,value:s}:"",options:v.a.map(t,function(e){return{label:e,value:e}}),onChange:function(e){var t=e.value;n(o.type,t,"")}}))):r.a.createElement("div",null,r.a.createElement(Qn,null,r.a.createElement(vi,{src:o.icon,alt:""}),o.type),v.a.map(i,function(e){return r.a.createElement($n,{type:"button",key:e.name,selected:v.a.get(a,"topicName")===e.name,onClick:function(){return n(o.type,e.name,e.messageType)}},e.name)}),0===v.a.size(i)&&r.a.createElement(Hn,null,"No topics available for the visualization type"))}}]),t}(r.a.PureComponent),zi=a(105),xi=a.n(zi),Ci=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.vizType,t=v.a.find(ja,function(t){return t.type===e}),a=t.description,n=t.docsLink,i=t.type;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,i),r.a.createElement(xi.a,{source:a}),r.a.createElement(on,{href:n},"View docs"))}}]),t}(r.a.PureComponent),Si=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={selectedViz:""},a.selectViz=a.selectViz.bind(Object(h.a)(a)),a.onSubmit=a.onSubmit.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"selectViz",value:function(e,t,a){this.setState({selectedViz:{vizType:e,topicName:t,messageType:a}})}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.props.selectViz,a=this.state.selectedViz,n=a.messageType,i=a.topicName;t(a.vizType,i,n)}},{key:"render",value:function(){var e=this,t=this.state.selectedViz,a=this.props,n=a.closeModal,i=a.rosParams,o=a.rosTopics;return r.a.createElement(Kn,{onSubmit:this.onSubmit},r.a.createElement(qn,null,r.a.createElement(Gn,null,v.a.map(ja,function(a){return r.a.createElement(Ei,{selectViz:e.selectViz,selectedViz:t,rosParams:i,key:a.type,vizDetails:a,topics:v.a.filter(o,function(e){return v.a.includes(a.messageTypes,e.messageType)})})})),r.a.createElement(Zn,null,t?r.a.createElement(Ci,{vizType:t.vizType}):r.a.createElement("p",null,"No visualization selected.",r.a.createElement("br",null),"Please choose a visualization on the left to see details"))),r.a.createElement(Wn,null,r.a.createElement(ln,null),r.a.createElement(mn,{type:"submit",disabled:!t},"Proceed"),r.a.createElement(mn,{type:"button",onClick:n},"Close")))}}]),t}(r.a.PureComponent),Ti=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={selectedViz:""},a.selectViz=a.selectViz.bind(Object(h.a)(a)),a.onSubmit=a.onSubmit.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"selectViz",value:function(e,t,a){this.setState({selectedViz:{vizType:e,topicName:t,messageType:a}})}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.props.selectViz,a=this.state.selectedViz,n=a.messageType,i=a.topicName;t(a.vizType,i,n)}},{key:"render",value:function(){var e=this,t=this.props,a=t.closeModal,n=t.rosTopics,i=this.state.selectedViz;return r.a.createElement(Kn,{onSubmit:this.onSubmit},r.a.createElement(qn,null,r.a.createElement(Gn,null,v.a.map(v.a.sortBy(n,"name"),function(t){var a=t.name,n=t.messageType,o=v.a.find(ja,function(e){return v.a.includes(e.messageTypes,n)});return o?r.a.createElement(Jn,{type:"button",selected:v.a.get(i,"topicName")===a,key:a,onClick:function(){return e.selectViz(o.type,a,n)}},a,r.a.createElement(ln,null),"(",n,")"):r.a.createElement(Xn,{key:a},a,r.a.createElement(ln,null),"(Unsupported type: ",n,")")}))),r.a.createElement(Wn,null,r.a.createElement(ln,null),r.a.createElement(mn,{type:"submit",disabled:!i},"Proceed"),r.a.createElement(mn,{type:"button",onClick:a},"Close")))}}]),t}(r.a.Component),Pi={loading:0,loaded:1,error:2},Vi=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={name:e.selectedViz.vizType,packages:{},status:Pi.loading},a.onSubmit=a.onSubmit.bind(Object(h.a)(a)),a.getPackages=a.getPackages.bind(Object(h.a)(a)),a.updateName=a.updateName.bind(Object(h.a)(a)),a.updatePackage=a.updatePackage.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getPackages()}},{key:"updateName",value:function(e){this.setState({name:e.target.value})}},{key:"getPackages",value:function(){var e=this,t=this.props,a=t.ros,n=t.selectedViz.topicName;try{new ma.RobotModel(a,n).getPackages(function(t){e.setState({packages:v.a.mapValues(v.a.keyBy(t),function(e){return"/".concat(e)}),status:Pi.loaded})})}catch(i){this.setState({status:Pi.error})}}},{key:"updatePackage",value:function(e){var t=e.target,a=t.dataset.id,n=t.value,i=this.state.packages;this.setState({packages:Object(c.a)({},i,Object(va.a)({},a,n))})}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.props,a=t.addVisualization,n=t.selectedViz,i=this.state,o=i.name,r=i.packages;a(Object(c.a)({},n,{name:o,packages:r}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.packages,i=t.status,o=this.props.back;return i===Pi.loading?r.a.createElement(nn,null,"Loading list of packages..."):i===Pi.error?r.a.createElement(nn,null,"Error occured while fetching packages. Please"," ",r.a.createElement(an,{onClick:this.getPackages},"try again")):r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(vn,null,r.a.createElement(fn,null,"Visualization name"),r.a.createElement(On,{value:a,onChange:this.updateName})),r.a.createElement(Qn,null,"Packages"),v.a.map(n,function(t,a){return r.a.createElement(vn,{key:a},r.a.createElement(fn,null,a),r.a.createElement(On,{"data-id":a,value:t,onChange:e.updatePackage,required:!0}))}),r.a.createElement(Wn,null,r.a.createElement(ln,null),r.a.createElement(mn,{type:"submit"},"Add Robot model"),r.a.createElement(mn,{type:"button",onClick:o},"Back")))}}]),t}(r.a.Component),Ni=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={name:e.selectedViz.vizType},a.onSubmit=a.onSubmit.bind(Object(h.a)(a)),a.updateName=a.updateName.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updateName",value:function(e){this.setState({name:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.props,a=t.addVisualization,n=t.selectedViz,i=this.state.name;a(Object(c.a)({},n,{name:i,visible:!0}))}},{key:"render",value:function(){var e=this.state.name,t=this.props.back;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(vn,null,r.a.createElement(fn,null,"Visualization name"),r.a.createElement(On,{value:e,onChange:this.updateName})),r.a.createElement(Wn,null,r.a.createElement(ln,null),r.a.createElement(mn,{type:"submit"},"Add visualization"),r.a.createElement(mn,{type:"button",onClick:t},"Back")))}}]),t}(r.a.Component),Ri=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.addVisualization,a=e.back,n=e.ros,i=e.selectedViz.vizType,o=e.selectedViz;return"RobotModel"===i?r.a.createElement(Vi,{addVisualization:t,ros:n,selectedViz:o,back:a}):r.a.createElement(Ni,{addVisualization:t,selectedViz:o,back:a})}}]),t}(r.a.PureComponent),Mi=function(e){return e.stopPropagation()},Ai={vizType:"Visualization type",topicName:"Topic name"},Li=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={tabType:Ai.vizType,selectedViz:""},a.updateTab=a.updateTab.bind(Object(h.a)(a)),a.selectViz=a.selectViz.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updateTab",value:function(e){this.setState({tabType:e})}},{key:"selectViz",value:function(e,t,a){this.setState({selectedViz:e?{vizType:e,topicName:t,messageType:a}:""})}},{key:"render",value:function(){var e=this,t=this.props,a=t.addVisualization,n=t.closeModal,i=t.ros,o=t.rosParams,s=t.rosTopics,c=this.state,l=c.selectedViz,u=c.tabType;return r.a.createElement(Un,{onClick:n},r.a.createElement(Bn,{onClick:Mi},r.a.createElement(Yn,null,"Add Visualization"),l?r.a.createElement(Ri,{addVisualization:a,selectedViz:l,ros:i,back:function(){return e.selectViz(null)}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(hn,null,v.a.map(Ai,function(t){return r.a.createElement(bn,{key:t,type:"button",selected:u===t,onClick:function(){return e.updateTab(t)}},t)})),u===Ai.vizType?r.a.createElement(Si,{selectViz:this.selectViz,rosTopics:s,rosParams:o,closeModal:n}):r.a.createElement(Ti,{selectViz:this.selectViz,rosTopics:s,closeModal:n}))))}}]),t}(r.a.Component),Ii=function(e){var t=e.label,a=e.children;return r.a.createElement(kn,null,r.a.createElement(jn,null,t,":"),r.a.createElement(jn,null,a))},_i=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).updateOptions=a.updateOptions.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updateOptions",value:function(e){var t=this.props.updateGlobalOptions,a=e.target;t(a.dataset.id,a.value)}},{key:"render",value:function(){var e=this.props,t=e.framesList,a=e.globalOptions,n=a.backgroundColor,i=n.display,o=n.value,s=a.display,c=a.fixedFrame,l=c.display,u=c.value,d=a.grid,p=d.display,h=d.size;return s?r.a.createElement(pn,null,i&&r.a.createElement(Ii,{label:"Background Color"},r.a.createElement(On,{type:"color","data-id":"backgroundColor.value",value:o,onChange:this.updateOptions})),p&&r.a.createElement(Ii,{label:"Grid size"},h),l&&r.a.createElement(Ii,{label:"Fixed frame"},r.a.createElement(yn,{value:u,"data-id":"fixedFrame.value",onChange:this.updateOptions},v.a.map(t,function(e){return r.a.createElement("option",{key:e,value:e},e)})))):null}}]),t}(r.a.PureComponent),Fi=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.status;return r.a.createElement(zn,{status:e})}}]),t}(r.a.PureComponent),Di=function(){return r.a.createElement("svg",{viewBox:"0 0 1870.38 418.16",style:{fill:"#000"}},r.a.createElement("polygon",{points:"159.8 241.17 231.44 365.27 303.09 241.17 159.8 241.17"}),r.a.createElement("polygon",{points:"54.32 58.49 98.6 135.18 364.28 135.18 320 58.49 54.32 58.49"}),r.a.createElement("polygon",{points:"480.2 182.67 408.56 58.58 336.91 182.67 480.2 182.67"}),r.a.createElement("polygon",{points:"585.68 365.35 541.4 288.66 275.72 288.66 320 365.35 585.68 365.35"}),r.a.createElement("path",{d:"M885.76,59.56c6,0,7.57,3.79,5.68,9.08L797.19,312.4h83.27c3.79,0,6.06,1.89,6.06,6.05v37.48c0,3.78-2.27,6.05-6.06,6.43H733.22c-6.05,0-7.94-3.78-5.67-9.08L821.79,109.9H743.44c-3.78,0-6.05-2.27-6.05-6.06V66c0-4.16,2.27-6,6.05-6.43Z"}),r.a.createElement("path",{d:"M1065.92,103.46c0,3.79-1.51,6.44-6.05,6.44H965.24v75.7h72.29c3.79,0,6.06,2.27,6.06,6.43v37.48c0,4.16-2.27,6.43-6.06,6.43H965.24V312.4h94.63c4.54,0,6.05,1.89,6.05,6.05v37.86c0,3.78-1.51,6.05-6.05,6.05H920.58c-3.41,0-5.68-2.27-5.68-6.05V65.62c0-3.79,2.27-6.06,5.68-6.06h139.29c4.54,0,6.05,2.27,6.05,6.06Z"}),r.a.createElement("path",{d:"M1241.54,59.56c4.17,0,6.06,2.27,6.06,6.06v37.84c0,3.79-1.89,6.06-6.06,6.06h-43.9V356.31c0,4.16-1.89,6.05-6.06,6.05h-39.36c-3.79,0-6.06-1.89-6.06-6.05V109.52h-43.91c-3.78,0-6.06-2.27-6.06-6.06V65.62c0-3.79,2.28-6.06,6.06-6.06Z"}),r.a.createElement("path",{d:"M1377.8,65.62c0-3.79,2.27-6.06,6-6.06h39c4.54,0,6.43,2.27,6.43,6.06V356.31c0,3.78-1.89,6.05-6.43,6.05h-39c-3.78,0-6-2.27-6-6.05V235.94h-48.45V356.31c0,3.78-2.27,6.05-6.06,6.05h-39c-4.55,0-6.44-2.27-6.44-6.05V65.62c0-3.79,1.89-6.06,6.44-6.06h39c3.79,0,6.06,2.27,6.06,6.06V186h48.45Z"}),r.a.createElement("path",{d:"M1611,59.56a7.59,7.59,0,0,1,7.57,7.57V307.86c0,35.57-18.92,54.5-54.5,54.5h-42.39c-35.58,0-54.51-18.93-54.51-54.5V67.13a7.6,7.6,0,0,1,7.57-7.57H1511a7.6,7.6,0,0,1,7.57,7.57V297.26c0,10.22,5.3,15.14,15.14,15.14h19.68c9.84,0,15.14-4.92,15.14-15.14V67.13a7.6,7.6,0,0,1,7.57-7.57Z"}),r.a.createElement("path",{d:"M1753.27,59.56c35.58,0,54.5,18.92,54.5,54.5v40.12c0,3.79-1.89,6.06-6,6.06h-39.37c-3.78,0-6-2.27-6-6.06V124.66c0-9.84-4.92-15.14-15.15-15.14H1723c-9.46,0-15.14,5.3-15.14,15.14v52.23l90.08,29.53c6.44,2.65,9.84,6.81,9.84,14v87.44c0,35.57-18.92,54.5-54.5,54.5h-42.39c-35.2,0-54.51-18.93-54.51-54.5V268.11c0-4.16,2.27-6.05,6.06-6.05h39.36c4.17,0,6.06,1.89,6.06,6.05v29.15c0,10.22,5.68,15.14,15.14,15.14h18.16c9.85,0,15.15-4.92,15.15-15.14V246.92l-89.71-29.53c-6.81-2.27-10.22-6.81-10.22-14V114.06c0-35.58,19.31-54.5,54.51-54.5Z"}))},Ui=function(e){var t=e.options,a=t.autocomputeIntensityBounds,n=t.channelName,i=t.maxColor,o=t.maxIntensity,s=t.minColor,c=t.minIntensity,l=t.useRainbow,u=e.updateOptions;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{label:"Channel Name"},r.a.createElement(yn,{name:"channelName","data-id":"channelName",onChange:u,value:n},v.a.map(we,function(e){return r.a.createElement("option",{key:e,value:e},e)}))),!l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{label:"Min Color"},r.a.createElement(On,{name:"minColor",type:"color","data-id":"minColor",value:s,onChange:u})),r.a.createElement(Ii,{label:"Max Color"},r.a.createElement(On,{name:"maxColor",type:"color","data-id":"maxColor",value:i,onChange:u}))),!a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{label:"Min Intensity"},r.a.createElement(On,{type:"number",name:"minIntensity","data-id":"minIntensity",value:c,onChange:u})),r.a.createElement(Ii,{label:"Max Intensity"},r.a.createElement(On,{type:"number",name:"maxIntensity","data-id":"maxIntensity",value:o,onChange:u}))))},Bi=function(e){var t=e.options,a=t.autocomputeValueBounds,n=t.axis,i=t.maxAxisValue,o=t.minAxisValue,s=e.updateOptions;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{label:"Axis"},r.a.createElement(yn,{name:"axis","data-id":"axis",onChange:s,value:n},v.a.map(ke,function(e){return r.a.createElement("option",{key:e,value:e},e)}))),!a&&r.a.createElement(wn,null,r.a.createElement(Ii,{label:"Min Value"},r.a.createElement(On,{type:"number",name:"minAxisValue","data-id":"minAxisValue",value:o,onChange:s})),r.a.createElement(Ii,{label:"Max Value"},r.a.createElement(On,{type:"number",name:"maxAxisValue","data-id":"maxAxisValue",value:i,onChange:s}))))},Yi=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.options,a=t.colorTransformer,n=t.flatColor,i=e.options,o=e.updateOptions;switch(a){case ye.INTENSITY:return r.a.createElement(Ui,{options:i,updateOptions:o});case ye.AXIS_COLOR:return r.a.createElement(Bi,{options:i,updateOptions:o});case ye.FLAT_COLOR:return r.a.createElement(Ii,{label:"Flat Color"},r.a.createElement(On,{type:"color",name:"flatColor","data-id":"flatColor",value:n,onChange:o}));default:return null}}}]),t}(r.a.PureComponent),Wi=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).updateOptions=wa.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.options,t=Object(c.a)({},Ge,e),a=t.alpha,n=t.colorTransformer,i=t.size,o=t.style;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{label:"Style"},r.a.createElement(yn,{name:"style","data-id":"style",onChange:this.updateOptions,value:o},v.a.map(Oe,function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(Ii,{label:"Size"},r.a.createElement(On,{type:"number",name:"size","data-id":"size",value:i,onChange:this.updateOptions})),r.a.createElement(Ii,{label:"Alpha"},r.a.createElement(On,{type:"number",name:"alpha","data-id":"alpha",value:a,onChange:this.updateOptions})),r.a.createElement(Ii,{label:"Color Transformer"},r.a.createElement(yn,{name:"colorTransformer","data-id":"colorTransformer",onChange:this.updateOptions,value:n},v.a.map(ye,function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(Yi,{options:t,updateOptions:this.updateOptions}))}}]),t}(r.a.PureComponent),Hi=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).updateOptions=wa.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.options,t=Object(c.a)({},Ze,e),a=t.alpha,n=t.colorScheme,i=t.drawBehind;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{label:"Alpha"},r.a.createElement(On,{type:"number",name:"alpha","data-id":"alpha",value:a,onChange:this.updateOptions})),r.a.createElement(Ii,{label:"Color Scheme"},r.a.createElement(yn,{name:"colorScheme","data-id":"colorScheme",onChange:this.updateOptions,value:n},v.a.map(ge,function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(Ii,{label:"Draw Behind"},r.a.createElement(On,{type:"checkbox",name:"drawBehind","data-id":"drawBehind",value:i,onChange:this.updateOptions})))}}]),t}(r.a.Component),Xi=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).updateNamespaceVisibility=a.updateNamespaceVisibility.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updateNamespaceVisibility",value:function(e){var t=this.props,a=t.options,n=a.key,i=a.namespaces,o=t.updateVizOptions,r=e.target,s=r.checked,l=r.dataset.id;o(n,{namespaces:Object(c.a)({},i,Object(va.a)({},l,s))})}},{key:"render",value:function(){var e=this,t=this.props.options,a=Object(c.a)({},Qe,t).namespaces;return 0===v.a.size(v.a.compact(v.a.keys(a)))?null:r.a.createElement(r.a.Fragment,null,"Namespaces:",r.a.createElement(wn,null,v.a.map(a,function(t,a){return a?r.a.createElement(Ii,{label:a},r.a.createElement(On,{name:a,type:"checkbox","data-id":"key",checked:t,onChange:e.updateNamespaceVisibility})):null})))}}]),t}(r.a.PureComponent),qi=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.options,a=e.updateOptions,n=Object(c.a)({},De,t),i=n.alpha,o=n.color,s=n.headLength,l=n.headRadius,u=n.shaftLength,d=n.shaftRadius;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{label:"Color"},r.a.createElement(On,{name:"color",type:"color",value:o,"data-id":"color",onChange:a})),r.a.createElement(Ii,{label:"Alpha"},r.a.createElement(On,{name:"alpha",type:"number",value:i,"data-id":"alpha",onChange:a})),r.a.createElement(Ii,{label:"Shaft Length"},r.a.createElement(On,{name:"shaftLength",type:"number",value:u,"data-id":"shaftLength",onChange:a})),r.a.createElement(Ii,{label:"Shaft Radius"},r.a.createElement(On,{name:"shaftRadius",type:"number",value:d,"data-id":"shaftRadius",onChange:a})),r.a.createElement(Ii,{label:"Head Length"},r.a.createElement(On,{name:"headLength",type:"number",value:s,"data-id":"headLength",onChange:a})),r.a.createElement(Ii,{label:"Head Radius"},r.a.createElement(On,{name:"headRadius",type:"number",value:l,"data-id":"headRadius",onChange:a})))}}]),t}(r.a.PureComponent),Gi=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.options,a=e.updateOptions,n=Object(c.a)({},Be,t),i=n.alpha,o=n.arrowLength,s=n.color;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{label:"Color"},r.a.createElement(On,{name:"color",type:"color",value:s,"data-id":"color",onChange:a})),r.a.createElement(Ii,{label:"Alpha"},r.a.createElement(On,{name:"alpha",type:"number",value:i,"data-id":"alpha",onChange:a})),r.a.createElement(Ii,{label:"Arrow length"},r.a.createElement(On,{name:"arrowLength",type:"number","data-id":"arrowLength",value:o,onChange:a})))}}]),t}(r.a.PureComponent),Zi=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.options,a=e.updateOptions,n=Object(c.a)({},Ue,t),i=n.axesLength,o=n.axesRadius;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{label:"Axes Length"},r.a.createElement(On,{name:"axesLength",type:"number","data-id":"axesLength",value:i,onChange:a})),r.a.createElement(Ii,{label:"Axes Radius"},r.a.createElement(On,{name:"axesRadius",type:"number","data-id":"axesRadius",value:o,onChange:a})))}}]),t}(r.a.PureComponent),Qi=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.options,a=e.options.type,n=e.updateOptions;switch(a){case N:return r.a.createElement(qi,{updateOptions:n,options:t});case M:return r.a.createElement(Gi,{updateOptions:n,options:t});case R:return r.a.createElement(Zi,{updateOptions:n,options:t});default:return null}}}]),t}(r.a.PureComponent),Ki=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).updateOptions=wa.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.options,t=Object(c.a)({},Je,e),a=t.angleTolerance,n=t.keep,i=t.positionTolerance,o=t.type;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{label:"Position Tolerance"},r.a.createElement(On,{name:"positionTolerance",type:"number",value:i,"data-id":"positionTolerance",onChange:this.updateOptions})),r.a.createElement(Ii,{label:"Angle Tolerance"},r.a.createElement(On,{name:"angleTolerance",type:"number","data-id":"angleTolerance",value:a,onChange:this.updateOptions})),r.a.createElement(Ii,{label:"Keep"},r.a.createElement(On,{name:"keep",type:"number","data-id":"keep",value:n,onChange:this.updateOptions})),r.a.createElement(Ii,{label:"Shape"},r.a.createElement(yn,{name:"type","data-id":"type",onChange:this.updateOptions,value:o},v.a.map([N,R],function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(wn,null,r.a.createElement(Qi,{options:t,updateOptions:this.updateOptions})))}}]),t}(r.a.PureComponent),Ji=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).updateOptions=wa.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.options,t=Object(c.a)({},$e,e),a=t.alpha,n=t.color;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{label:"Color"},r.a.createElement(On,{type:"color",name:"color","data-id":"color",value:n,onChange:this.updateOptions})),r.a.createElement(Ii,{label:"Alpha"},r.a.createElement(On,{type:"number",name:"alpha","data-id":"alpha",value:a,onChange:this.updateOptions})))}}]),t}(r.a.PureComponent),$i=(hi={},Object(va.a)(hi,"Pose",[N,R]),Object(va.a)(hi,"PoseArray",[N,R,M]),hi),eo=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).updateOptions=wa.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.options,t=Object(c.a)({},it,e),a=t.type,n=t.vizType;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{label:"Shape"},r.a.createElement(yn,{name:"type","data-id":"type",onChange:this.updateOptions,value:a},v.a.map($i[n],function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(wn,null,r.a.createElement(Qi,{options:t,updateOptions:this.updateOptions})))}}]),t}(r.a.PureComponent),to=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).updateOptions=wa.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.options,t=Object(c.a)({},tt,e),a=t.colorChannel,n=t.size,i=t.useRainbow;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{label:"Color channel"},r.a.createElement(yn,{name:"colorChannel","data-id":"colorChannel",onChange:this.updateOptions,value:a},v.a.map(je,function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(Ii,{label:"Size"},r.a.createElement(On,{type:"number",name:"size","data-id":"size",value:n,onChange:this.updateOptions})),a===je.INTENSITY&&r.a.createElement(Ii,{label:"Use Rainbow"},r.a.createElement(On,{type:"checkbox",name:"useRainbow","data-id":"useRainbow",value:i,onChange:this.updateOptions})))}}]),t}(r.a.PureComponent),ao=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).updateOptions=wa.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.options,t=Object(c.a)({},at,e),a=t.alpha,n=t.color,i=t.radius;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{label:"Radius"},r.a.createElement(On,{type:"number",name:"radius",step:"0.01","data-id":"radius",value:i,onChange:this.updateOptions})),r.a.createElement(Ii,{label:"Color"},r.a.createElement(On,{type:"color",name:"color","data-id":"color",value:n,onChange:this.updateOptions})),r.a.createElement(Ii,{label:"Alpha"},r.a.createElement(On,{type:"number",name:"alpha",step:"0.01","data-id":"alpha",value:a,onChange:this.updateOptions})))}}]),t}(r.a.PureComponent),no=function(e){var t=e.options.vizType,a=e.options,n=e.updateVizOptions;switch(t){case"Image":return null;case"LaserScan":return r.a.createElement(Wi,{options:a,updateVizOptions:n});case"Map":return r.a.createElement(Hi,{options:a,updateVizOptions:n});case"Marker":return r.a.createElement(Xi,{options:a,updateVizOptions:n});case"MarkerArray":return null;case"Odometry":return r.a.createElement(Ki,{options:a,updateVizOptions:n});case"Path":return r.a.createElement(Ji,{options:a,updateVizOptions:n});case"Point":return r.a.createElement(ao,{options:a,updateVizOptions:n});case"PointCloud":return r.a.createElement(to,{options:a,updateVizOptions:n});case"Polygon":return null;case"Pose":return r.a.createElement(eo,{options:a,updateVizOptions:n});case"PoseArray":case"RobotModel":case"Tf":default:return null}},io=function(e){var t=e.options,a=t.display,n=t.key,i=t.name,s=t.topicName,c=t.visible,l=t.vizType,u=e.options,d=e.topics,p=e.vizObject.icon,h=e.updateVizOptions,b=e.removeVisualization,m=e.toggleVisibility,f=Object(o.useState)(!1),g=Object(z.a)(f,2),O=g[0],y=g[1];return v.a.isBoolean(a)&&!a?null:r.a.createElement(yi,null,r.a.createElement(kn,null,r.a.createElement(ki,{collapsed:O,onClick:function(){return y(!O)}},r.a.createElement("img",{src:"./image/chevron.svg",alt:""})),r.a.createElement(vi,{src:p,alt:""}),i),!O&&r.a.createElement(mi,null,!v.a.includes(["RobotModel","Tf"],l)&&r.a.createElement(Ii,{label:"Topic"},r.a.createElement(yn,{value:s,onChange:function(e){return h(n,{topicName:e.target.value})}},v.a.map(d,function(e){return r.a.createElement("option",{key:e.name},e.name)}))),r.a.createElement(no,{options:u,updateVizOptions:h}),r.a.createElement(ji,null,r.a.createElement(an,{"data-id":n,onClick:b},"Delete"),r.a.createElement(an,{"data-id":n,onClick:m},v.a.isBoolean(c)&&!c?"Show":"Hide"))))},oo=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={rosInput:e.rosEndpoint},a.updateRosInput=a.updateRosInput.bind(Object(h.a)(a)),a.onSubmit=a.onSubmit.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updateRosInput",value:function(e){this.setState({rosInput:e.target.value})}},{key:"onSubmit",value:function(e){var t=this.props,a=t.connectRos,n=t.disconnectRos,i=t.rosEndpoint,o=t.rosStatus,r=t.updateRosEndpoint,s=this.state.rosInput;e.preventDefault(),s!==i?r(s):v.a.includes([fa.CONNECTED,fa.CONNECTING],o)?n():a()}},{key:"render",value:function(){var e=this.props,t=e.framesList,a=e.visualizations,n=e.removeVisualization,i=e.rosInstance,o=e.rosStatus,s=e.rosTopics,c=e.globalOptions,l=e.toggleVisibility,u=e.updateGlobalOptions,d=e.updateVizOptions,p=e.viewer,h=e.toggleAddModal,b=this.state.rosInput;return r.a.createElement(xn,null,r.a.createElement(Cn,null,r.a.createElement(Di,null)),r.a.createElement(rn,null),r.a.createElement(pn,null,r.a.createElement(gi,null,r.a.createElement(Fi,{status:o}),r.a.createElement("span",null,o)),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(fn,null,"ROS Endpoint"),r.a.createElement(sn,null,r.a.createElement(On,{type:"text",value:b,onChange:this.updateRosInput}),r.a.createElement(cn,null),r.a.createElement(mn,{type:"submit"},v.a.includes([fa.CONNECTED,fa.CONNECTING],o)?"Disconnect":"Connect")))),r.a.createElement(rn,null),o===fa.CONNECTED&&r.a.createElement(r.a.Fragment,null,r.a.createElement(_i,{framesList:t,globalOptions:c,updateGlobalOptions:u}),r.a.createElement(rn,null),r.a.createElement(bi,null,r.a.createElement(mn,{type:"button",onClick:h},"Add Visualization"),0===v.a.size(a)&&r.a.createElement("p",null,"No visualizations added to the scene"),v.a.map(a,function(e){var t=v.a.find(ja,function(t){return t.type===e.vizType});if(!t)return null;var a=v.a.filter(s,function(e){return v.a.includes(t.messageTypes,e.messageType)});return r.a.createElement(io,{options:e,key:e.key,viewer:p,topics:a,vizObject:t,rosInstance:i,updateVizOptions:d,removeVisualization:n,toggleVisibility:l})}))))}}]),t}(r.a.Component);function ro(){var e=Object(Ea.a)(["\n  width: 100%;\n  flex-grow: 1;\n  height: 100%;\n  position: relative;\n\n  #viewportStats {\n    position: absolute !important;\n    top: auto !important;\n    left: auto !important;\n    right: 0 !important;\n    bottom: 0 !important;\n  }\n"]);return ro=function(){return e},e}var so=za.b.div(ro()),co=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).container=r.a.createRef(),a.updateViewerOptions=a.updateViewerOptions.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(){this.updateViewerOptions()}},{key:"updateViewerOptions",value:function(){var e=this.props,t=e.globalOptions,a=t.backgroundColor.value,n=t.fixedFrame.value,i=t.grid,o=i.centerlineColor,r=i.color,s=i.divisions,c=i.size;e.viewer.updateOptions({backgroundColor:a,gridSize:c,gridDivisions:s,gridColor:r,gridCenterlineColor:o,selectedFrame:n})}},{key:"componentDidMount",value:function(){var e=this.props.viewer,t=this.container.current;e.setContainer(t),this.updateViewerOptions(),e.scene.stats.dom.id="viewportStats",t.appendChild(e.scene.stats.dom)}},{key:"componentWillUnmount",value:function(){this.props.viewer.destroy()}},{key:"render",value:function(){return r.a.createElement(so,{ref:this.container})}}]),t}(r.a.PureComponent),lo=function(){return null},uo=function(){},po=a(106),ho=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).vizInstance=null,a.imageDomRef=r.a.createRef(),a.resetVisualization=a.resetVisualization.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.resetVisualization()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.options,n=a.topicName,i=a.visible,o=a.vizType,r=t.options,s=t.rosTopics;if(o!==e.options.vizType&&this.resetVisualization(),"Tf"===o){var c=ya(s),l=ya(e.rosTopics);v.a.join(v.a.sortBy(v.a.map(c,"name")))!==v.a.join(v.a.sortBy(v.a.map(l,"name")))&&this.vizInstance.changeTopic(c)}else n!==e.options.topicName&&this.vizInstance.changeTopic&&this.vizInstance.changeTopic(n);this.vizInstance&&this.vizInstance.updateOptions(r),i!==e.options.visible&&this.updateVisibility(i)}},{key:"resetVisualization",value:function(){var e=this.props,a=e.options,n=e.options,i=n.topicName,o=n.visible,r=n.vizType,s=e.rosInstance,c=e.rosTopics,l=e.viewer;this.vizInstance&&this.vizInstance.destroy(),this.vizInstance=t.getNewViz(r,s,"Tf"===r?ya(c):i,a),this.vizInstance&&("RobotModel"===r?l.addRobot(this.vizInstance):"Image"===r?(this.imageDomRef.current.appendChild(this.vizInstance.object),this.vizInstance.subscribe()):(l.addVisualization(this.vizInstance),this.vizInstance.subscribe()),this.updateVisibility(!v.a.isBoolean(o)||o))}},{key:"updateVisibility",value:function(e){e?this.vizInstance.show():this.vizInstance.hide()}},{key:"componentWillUnmount",value:function(){this.vizInstance&&this.vizInstance.destroy()}},{key:"render",value:function(){var e=this,t=this.props.options,a=t.topicName,n=t.visible;return"Image"===t.vizType?r.a.createElement(po.a,{style:{visibility:n?"visible":"hidden"},default:{x:window.innerWidth-320-30,y:30,width:320,height:265},bounds:"window",onResizeStop:function(t,a,n){e.vizInstance.updateDimensions(Number.parseInt(n.style.width,10),Number.parseInt(n.style.height,10)-25)}},r.a.createElement(fi,{ref:this.imageDomRef},r.a.createElement(Oi,null,"Image - ",a))):null}}],[{key:"getNewViz",value:function(e,t,a,n){switch(e){case"Image":return new ma.Image(t,a,n);case"LaserScan":return new ma.LaserScan(t,a,n);case"Map":return new ma.Map(t,a,n);case"Marker":return new ma.Marker(t,a,n);case"MarkerArray":return new ma.MarkerArray(t,a,n);case"Odometry":return new ma.Odometry(t,a,n);case"Path":return new ma.Path(t,a,n);case"Point":return new ma.Point(t,a,n);case"PointCloud":return new ma.PointCloud(t,a,n);case"Pose":return new ma.Pose(t,a,n);case"PoseArray":return new ma.PoseArray(t,a,n);case"RobotModel":return new ma.RobotModel(t,a,n);case"Tf":return new ma.Tf(t,a,n);default:return null}}}]),t}(r.a.PureComponent),bo=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={rosEndpoint:"",rosStatus:fa.INITIAL,addModalOpen:!1,rosTopics:[],rosParams:[],framesList:[]},a.connectRos=a.connectRos.bind(Object(h.a)(a)),a.disconnectRos=a.disconnectRos.bind(Object(h.a)(a)),a.toggleAddModal=a.toggleAddModal.bind(Object(h.a)(a)),a.refreshRosData=a.refreshRosData.bind(Object(h.a)(a)),a.addVisualization=a.addVisualization.bind(Object(h.a)(a)),a.updateFramesList=a.updateFramesList.bind(Object(h.a)(a)),a.ros=new E.a.Ros,a.viewer=new ma.TfViewer(a.ros,{onFramesListUpdate:a.updateFramesList}),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this.state.rosEndpoint;t.rosEndpoint!==a&&(this.disconnectRos(),this.connectRos())}},{key:"componentDidMount",value:function(){var e=this,t=this.state.rosEndpoint;this.ros.on("error",function(){e.setState({rosStatus:fa.CONNECTION_ERROR})}),this.ros.on("connection",this.refreshRosData),this.ros.on("close",function(){e.setState({rosStatus:fa.INITIAL})}),t&&this.connectRos()}},{key:"updateFramesList",value:function(e){this.setState({framesList:Object(s.a)(e)})}},{key:"refreshRosData",value:function(){var e=this;this.ros.getTopics(function(t){e.setState({rosStatus:fa.CONNECTED,rosTopics:v.a.map(t.topics,function(e,a){return{name:e,messageType:t.types[a]}})})}),this.ros.getParams(function(t){e.setState({rosParams:v.a.map(t,function(e){return v.a.trimStart(e,"/")})})})}},{key:"componentWillUnmount",value:function(){this.viewer.destroy()}},{key:"connectRos",value:function(){var e=this.state.rosEndpoint;this.setState({rosStatus:fa.CONNECTING}),this.ros.connect(e)}},{key:"disconnectRos",value:function(){this.ros&&this.ros.close&&this.ros.close()}},{key:"toggleAddModal",value:function(){var e=this.state.addModalOpen;this.setState({addModalOpen:!e})}},{key:"addVisualization",value:function(e){var t=this.props.addVisualization;t(e),this.setState({addModalOpen:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.addModalOpen,n=t.framesList,i=t.rosEndpoint,o=t.rosParams,s=t.rosStatus,c=t.rosTopics,l=this.props,u=l.configuration,d=u.globalOptions,p=u.panels,h=p.info.display,b=p.sidebar.display,m=p.tools.display,f=u.visualizations,g=l.removeVisualization,O=l.toggleVisibility,y=l.updateGlobalOptions,j=l.updateRosEndpoint,k=l.updateVizOptions;return r.a.createElement(un,null,a&&r.a.createElement(Li,{ros:this.ros,rosTopics:c,rosParams:o,closeModal:this.toggleAddModal,addVisualization:this.addVisualization}),b&&r.a.createElement(oo,{framesList:n,globalOptions:d,updateGlobalOptions:y,rosEndpoint:i,rosStatus:s,visualizations:f,viewer:this.viewer,rosTopics:c,rosInstance:this.ros,updateVizOptions:k,connectRos:this.connectRos,disconnectRos:this.disconnectRos,updateRosEndpoint:j,toggleAddModal:this.toggleAddModal,removeVisualization:g,toggleVisibility:O}),r.a.createElement(dn,null,m&&r.a.createElement(uo,null),r.a.createElement(co,{viewer:this.viewer,globalOptions:d}),h&&r.a.createElement(lo,null)),v.a.map(f,function(t){return r.a.createElement(ho,{options:t,key:t.key,viewer:e.viewer,rosTopics:c,rosInstance:e.ros})}))}}],[{key:"getDerivedStateFromProps",value:function(e){return{rosEndpoint:e.configuration.ros.endpoint}}}]),t}(r.a.Component);bo.defaultProps={configuration:ka};var mo=y()(bo),vo=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state=Object(c.a)({},e.configuration||k.a.get("zethus_config")||ka),a.updateVizOptions=a.updateVizOptions.bind(Object(h.a)(a)),a.updateRosEndpoint=a.updateRosEndpoint.bind(Object(h.a)(a)),a.updateGlobalOptions=a.updateGlobalOptions.bind(Object(h.a)(a)),a.addVisualization=a.addVisualization.bind(Object(h.a)(a)),a.removeVisualization=a.removeVisualization.bind(Object(h.a)(a)),a.toggleVisibility=a.toggleVisibility.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"updateVizOptions",value:function(e,t){var a=this.state.visualizations;this.setState({visualizations:v.a.map(a,function(a){return a.key===e?Object(c.a)({},a,t):a})})}},{key:"updateRosEndpoint",value:function(e){var t=this.state.ros;this.setState({ros:Object(c.a)({},t,{endpoint:e})})}},{key:"componentWillUnmount",value:function(){k.a.set("zethus_config",this.state)}},{key:"updateGlobalOptions",value:function(e,t){var a=this.state.globalOptions,n=v.a.cloneDeep(a);v.a.set(n,e,t),this.setState({globalOptions:n})}},{key:"removeVisualization",value:function(e){var t=e.target.dataset.id,a=this.state.visualizations;this.setState({visualizations:v.a.filter(a,function(e){return e.key!==t})})}},{key:"toggleVisibility",value:function(e){var t=e.target.dataset.id,a=this.state.visualizations;this.setState({visualizations:v.a.map(a,function(e){return e.key===t?Object(c.a)({},e,{visible:!(!v.a.isBoolean(e.visible)||e.visible)}):e})})}},{key:"addVisualization",value:function(e){var t=this.state.visualizations;this.setState({visualizations:[].concat(Object(s.a)(t),[Object(c.a)({},e,{key:g.a.generate()})])})}},{key:"render",value:function(){return r.a.createElement(mo,{configuration:this.state,addVisualization:this.addVisualization,removeVisualization:this.removeVisualization,toggleVisibility:this.toggleVisibility,updateVizOptions:this.updateVizOptions,updateRosEndpoint:this.updateRosEndpoint,updateGlobalOptions:this.updateGlobalOptions})}}]),t}(r.a.Component),fo=y()(vo);a(256);i.a.render(r.a.createElement(fo,null),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.926be2b8.chunk.js.map